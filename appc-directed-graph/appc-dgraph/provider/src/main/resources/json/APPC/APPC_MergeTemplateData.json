/*-
 * ============LICENSE_START=======================================================
 * ONAP : APP-C
 * ================================================================================
 * Copyright (C) 2017 AT&T Intellectual Property.  All rights reserved.
 * ================================================================================
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 *      http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ============LICENSE_END=========================================================
 */

[{"id":"f8921e1c.58be9","type":"switchNode","name":"switch config-type","xml":"<switch test='`$config-type`'>\n","comments":"","outputs":1,"x":442.0833206176758,"y":504.04761695861816,"z":"f345a691.511928","wires":[["9d50b4aa.bba6e8","be5ddc7b.c1ad2"]]},{"id":"9d50b4aa.bba6e8","type":"success","name":"outcome: template","xml":"<outcome value=\"template\">","comments":"","outputs":1,"x":628.9881057739258,"y":419.0833225250244,"z":"f345a691.511928","wires":[["52e44ac2.00d0b4"]]},{"id":"4bce4330.9abe1c","type":"call","name":"call: GenerateTemplateConfig","xml":"<call module=\"APPC\" rpc=\"GenerateTemplateConfig\" mode=\"sync\">","comments":"","outputs":1,"x":1006.9048614501953,"y":555.5833225250244,"z":"f345a691.511928","wires":[["52878bb3.758a94","5a3fc9b0.328488"]]},{"id":"52878bb3.758a94","type":"failure","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":1241.2380905151367,"y":628.7500057220459,"z":"f345a691.511928","wires":[["607a5532.aa9f4c"]]},{"id":"607a5532.aa9f4c","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":1464.9047584533691,"y":628.4166507720947,"z":"f345a691.511928","wires":[["d273087a.7aad98"]]},{"id":"d273087a.7aad98","type":"returnFailure","name":"return failure","xml":"<return status=\"failure\">\n\t<parameter name=\"error-code\" value=\"401\"/>\n\t<parameter name=\"error-message\" value=\"'DG Workflow GenerateTemplateConfig not found'`\"/>\n\t","comments":"","x":1730.2380638122559,"y":625.4166297912598,"z":"f345a691.511928","wires":[]},{"id":"5a3fc9b0.328488","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1232.571418762207,"y":684.7500066757202,"z":"f345a691.511928","wires":[["808e59e7.0b2f18"]]},{"id":"808e59e7.0b2f18","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":1447.5715026855469,"y":682.7499866485596,"z":"f345a691.511928","wires":[["768ae761.99be28"]]},{"id":"768ae761.99be28","type":"returnFailure","name":"return failure","xml":"<return status=\"failure\">\n\t\n\t","comments":"","x":1715.9047622680664,"y":684.4166326522827,"z":"f345a691.511928","wires":[]},{"id":"65721526.2ac06c","type":"comment","name":"templatename cases","info":"","comments":"","x":625.6548004150391,"y":381.16666412353516,"z":"f345a691.511928","wires":[]},{"id":"3fb4efa9.74098","type":"comment","name":"merge ASDC template and data","info":"","comments":"","x":993.1548004150391,"y":692.2500038146973,"z":"f345a691.511928","wires":[]},{"id":"38970141.b1febe","type":"comment","name":"configBlock with or without parameters","info":"","comments":"","x":641.4047546386719,"y":701.0833129882812,"z":"f345a691.511928","wires":[]},{"id":"52e44ac2.00d0b4","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":838.0714836120605,"y":416.7499475479126,"z":"f345a691.511928","wires":[["4bce4330.9abe1c","5334d0f2.038dc"]]},{"id":"5334d0f2.038dc","type":"execute","name":"execute getTemplate","xml":"<execute plugin=\"org.openecomp.appc.data.services.node.ConfigResourceNode\" method=\"getTemplate\">\n<parameter name=\"fileCategory\" value=\"config_template\" />\n<parameter name=\"responsePrefix\" value=\"config-template\" />","comments":"","outputs":1,"x":1029.2381134033203,"y":400.0833206176758,"z":"f345a691.511928","wires":[["14f12426.28387c","14aca030.0e42b"]]},{"id":"14f12426.28387c","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1235.4047508239746,"y":554.7499599456787,"z":"f345a691.511928","wires":[["cee4ac15.a8674"]]},{"id":"cee4ac15.a8674","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":1479.4047546386719,"y":552.7499809265137,"z":"f345a691.511928","wires":[["ca88c01e.42141"]]},{"id":"ca88c01e.42141","type":"returnFailure","name":"return failure","xml":"<return status=\"failure\">\n<parameter name=\"error-code\" value=\"401\"/>\n\t<parameter name=\"error-message\" value=\"`$config-template.error-message`\"/>\n\t\n\t\n\t","comments":"","x":1727.4048080444336,"y":556.7499618530273,"z":"f345a691.511928","wires":[]},{"id":"14aca030.0e42b","type":"failure","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":1233.0714988708496,"y":486.4166555404663,"z":"f345a691.511928","wires":[["9a175fa3.6cf5c"]]},{"id":"9a175fa3.6cf5c","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":1477.4047546386719,"y":486.7499885559082,"z":"f345a691.511928","wires":[["9ae65e20.973be"]]},{"id":"9ae65e20.973be","type":"returnFailure","name":"return failure","xml":"<return status=\"failure\">\n<parameter name=\"error-code\" value=\"401\"/>\n\t<parameter name=\"error-message\" value=\"Unable to get template info\"/>\n\t\n\t\n\t","comments":"","x":1712.4048919677734,"y":485.74997901916504,"z":"f345a691.511928","wires":[]},{"id":"be5ddc7b.c1ad2","type":"success","name":"outcome: Other","xml":"<outcome value=\"Other\">","comments":"","outputs":1,"x":572.6547622680664,"y":743.833324432373,"z":"f345a691.511928","wires":[["e4895786.a34328"]]},{"id":"e4895786.a34328","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":747.4047546386719,"y":743.0833129882812,"z":"f345a691.511928","wires":[["18151a68.7f7ee6"]]},{"id":"18151a68.7f7ee6","type":"call","name":"call: GenerateConfig","xml":"<call module=\"APPC\" rpc=\"GenerateConfig\" mode=\"sync\">","comments":"","outputs":1,"x":969.4047546386719,"y":746.0833129882812,"z":"f345a691.511928","wires":[["c0963b5e.dd87c8","ab05f1b3.bdac5"]]},{"id":"c0963b5e.dd87c8","type":"failure","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":1165.4047546386719,"y":740.0833129882812,"z":"f345a691.511928","wires":[["a8a5b7f4.67b348"]]},{"id":"a8a5b7f4.67b348","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":1337.4047546386719,"y":742.0833129882812,"z":"f345a691.511928","wires":[["744f44d3.fcdc9c"]]},{"id":"744f44d3.fcdc9c","type":"returnFailure","name":"return failure","xml":"<return status=\"failure\">\n\t<parameter name=\"error-code\" value=\"401\"/>\n\t<parameter name=\"error-message\" value=\"'DG Workflow GenerateConfig not found'`\"/>\n\t","comments":"","x":1518.4047546386719,"y":744.0833129882812,"z":"f345a691.511928","wires":[]},{"id":"ab05f1b3.bdac5","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1153.4047546386719,"y":802.0833129882812,"z":"f345a691.511928","wires":[["373b75fa.44f95a"]]},{"id":"373b75fa.44f95a","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":1324.4047546386719,"y":805.0833129882812,"z":"f345a691.511928","wires":[["f779061c.295e18"]]},{"id":"f779061c.295e18","type":"returnFailure","name":"return failure","xml":"<return status=\"failure\">\n\t\n\t","comments":"","x":1519.4047546386719,"y":807.0833129882812,"z":"f345a691.511928","wires":[]},{"id":"4b8122dc.6a8c3c","type":"dgstart","name":"DGSTART","outputs":1,"x":200.3492088317871,"y":101.55554485321045,"z":"f345a691.511928","wires":[["28792224.cbdf1e"]]},{"id":"28792224.cbdf1e","type":"service-logic","name":"APPC 4.0.0","module":"APPC","version":"4.0.0","comments":"","xml":"<service-logic xmlns='http://www.openecomp.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.openecomp.org/sdnc/svclogic ./svclogic.xsd' module='APPC' version='4.0.0'>","outputs":1,"x":433.46030044555664,"y":102.77776527404785,"z":"f345a691.511928","wires":[["4e973aa1.9126c4"]]},{"id":"4e973aa1.9126c4","type":"method","name":"method MergeTemplateData","xml":"<method rpc='MergeTemplateData' mode='sync'>\n","comments":"","outputs":1,"x":655.5436477661133,"y":101.74998569488525,"z":"f345a691.511928","wires":[["8d193752.62f9c8"]]},{"id":"8d193752.62f9c8","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":212.15476989746094,"y":248.5000081062317,"z":"f345a691.511928","wires":[["f8921e1c.58be9","fd6f20ad.09867","7526d1f3.61a4b","df45238c.529a5","19785350.3a3fdd"]]},{"id":"fd6f20ad.09867","type":"record","name":"record","xml":"<record plugin=\"org.openecomp.sdnc.sli.recording.Slf4jRecorder\">\n<parameter name=\"level\" value=\"info\"/>\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"CONFIGPARAMS\" value=\"`$config-data`\"/>\n<parameter name=\"CONFIGPARAMS1\" value=\"`$block_configuration-parameters`\"/>\n<parameter name=\"TEMPLATENAME\" value=\"`$template-name`\"/>\n<parameter name=\"CONFIGURATION\" value=\"`$configuration`\"/>\n<parameter name=\"CONFIGURATION1\" value=\"`$block_configuration`\"/>\n\n","comments":"","outputs":1,"x":670.0318069458008,"y":225.32538414001465,"z":"f345a691.511928","wires":[[]]},{"id":"7526d1f3.61a4b","type":"call","name":"call: ProcessParameterDefinition","xml":"<call module=\"APPC\" rpc=\"ProcessParameterDefinition\" mode=\"sync\">","comments":"","outputs":1,"x":692.6985015869141,"y":317.8531551361084,"z":"f345a691.511928","wires":[["432ecea.816133","d597c49.617f638"]]},{"id":"432ecea.816133","type":"failure","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":1167.7262115478516,"y":269.0476131439209,"z":"f345a691.511928","wires":[["6c5a4256.68696c"]]},{"id":"6c5a4256.68696c","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":1354.4762153625488,"y":272.0476121902466,"z":"f345a691.511928","wires":[["a070ac72.bb3ea"]]},{"id":"a070ac72.bb3ea","type":"returnFailure","name":"return failure","xml":"<return status=\"failure\">\n\t<parameter name=\"error-code\" value=\"401\"/>\n\t<parameter name=\"error-message\" value=\"'DG Workflow ProcessParameterDefinition not found'`\"/>\n\t","comments":"","x":1549.226219177246,"y":272.7976131439209,"z":"f345a691.511928","wires":[]},{"id":"d597c49.617f638","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1161.7262115478516,"y":351.0476140975952,"z":"f345a691.511928","wires":[["9fa5af5f.7dee5"]]},{"id":"9fa5af5f.7dee5","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":1359.7262153625488,"y":367.5476140975952,"z":"f345a691.511928","wires":[["613f0962.3cde88"]]},{"id":"613f0962.3cde88","type":"returnFailure","name":"return failure","xml":"<return status=\"failure\">\n\t\n\t","comments":"","x":1558.476219177246,"y":365.0476131439209,"z":"f345a691.511928","wires":[]},{"id":"df45238c.529a5","type":"execute","name":"execute saveTxLog","xml":"<execute plugin=\"org.openecomp.appc.data.services.node.ConfigResourceNode\" method=\"saveConfigTransactionLog\">\n<parameter name=\"messageType\" value=\"log\" />\n<parameter name=\"message\" value=\"Prepare Success\" />\n<parameter name=\"responsePrefix\" value=\"tmp.saveTxLog\" />\n","comments":"","outputs":1,"x":448.33329010009766,"y":894.9999332427979,"z":"f345a691.511928","wires":[["934a9413.e3a788"]]},{"id":"934a9413.e3a788","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":677.9999847412109,"y":900.3332691192627,"z":"f345a691.511928","wires":[["14ed0dbd.988a62"]]},{"id":"14ed0dbd.988a62","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":967.3333282470703,"y":929.3332691192627,"z":"f345a691.511928","wires":[[]]},{"id":"19785350.3a3fdd","type":"record","name":"record","xml":"<record plugin=\"org.openecomp.sdnc.sli.recording.Slf4jRecorder\">\n<parameter name=\"level\" value=\"info\"/>\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"CONFIGPARAMS\" value=\"`$config-data`\"/>\n","comments":"","outputs":1,"x":349.9999809265137,"y":1111.6666269302368,"z":"f345a691.511928","wires":[[]]}]
