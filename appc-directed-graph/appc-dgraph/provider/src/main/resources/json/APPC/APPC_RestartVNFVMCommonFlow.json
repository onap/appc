/*-
 * ============LICENSE_START=======================================================
 * ONAP : APP-C
 * ================================================================================
 * Copyright (C) 2017 AT&T Intellectual Property.  All rights reserved.
 * ================================================================================
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 *      http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ============LICENSE_END=========================================================
 */

[{"id":"9aae4313.f4c23","type":"method","name":"RestartVMVNFCommonFlow","xml":"<method rpc='RestartVMVNFCommonFlow' mode='sync'>\n","comments":"","outputs":1,"x":109,"y":191,"z":"76237122.4d8f48","wires":[["5488fab3.57f39c"]]},{"id":"95822870.dfab68","type":"service-logic","name":"APPC 2.0.0","module":"APPC","version":"2.0.0","comments":"","xml":"<service-logic xmlns='http://www.openecomp.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.openecomp.org/sdnc/svclogic ./svclogic.xsd' module='APPC' version='2.0.0'>","outputs":1,"x":92,"y":142,"z":"76237122.4d8f48","wires":[["9aae4313.f4c23"]]},{"id":"74a87c2c.c5f574","type":"dgstart","name":"DGSTART","outputs":1,"x":84,"y":92,"z":"76237122.4d8f48","wires":[["95822870.dfab68"]]},{"id":"8956d543.9797d8","type":"execute","name":"execute_getVNF_Hierarchy","xml":"<execute plugin='org.openecomp.appc.dg.util.ExecuteNodeAction' method='getVnfHierarchy'>\n<parameter name=\"resourceKey\" value=\"`$input.action-identifiers.vnf-id`\" />","comments":"","outputs":1,"x":360,"y":278,"z":"76237122.4d8f48","wires":[["2ecb035f.88b7ec","2eb544fc.c3c48c"]]},{"id":"2ecb035f.88b7ec","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":515.2857208251953,"y":323.85713386535645,"z":"76237122.4d8f48","wires":[["282079d0.792d6e"]]},{"id":"992597b.2a538e8","type":"block","name":"block : atomic","xml":"<block atomic='true'>\n","atomic":"true","comments":"","outputs":1,"x":1340.8573913574219,"y":318.5713963508606,"z":"76237122.4d8f48","wires":[["2a790eda.5a2052","d9d90af3.2884a8"]]},{"id":"2a790eda.5a2052","type":"for","name":"for_each_VMs","xml":"<for index=\"i\" start=\"0\" end=\"`$VNF.VMCount`\" >","comments":"","outputs":1,"x":1533.5717239379883,"y":328.42853116989136,"z":"76237122.4d8f48","wires":[["e03b548f.9c854"]]},{"id":"e03b548f.9c854","type":"block","name":"block : atomic","xml":"<block atomic='true'>\n","atomic":"true","comments":"","outputs":1,"x":1645.5717010498047,"y":261.7142515182495,"z":"76237122.4d8f48","wires":[["499580e3.427468"]]},{"id":"499580e3.427468","type":"execute","name":"execute_UpdateAA&I","xml":"<execute plugin='org.openecomp.appc.dg.util.ExecuteNodeAction' method='postResource'>\n<parameter name=\"resourceType\" value=\"vnfc\" />\n<parameter name=\"prefix\" value=\"vnfc\" />\n<parameter name=\"resourceKey\" value='vnfc-name = $VNF.VM[$i].VNFC' />\n<parameter name=\"attributeName\" value=\"orchestration-status\" />\n<parameter name=\"attributeValue\" value=\"Restarting\" />\n","comments":"","outputs":1,"x":1754.286018371582,"y":328.42854022979736,"z":"76237122.4d8f48","wires":[["b1922011.414848","9cc42436.b7ba78"]]},{"id":"b1922011.414848","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":2017.4285888671875,"y":329.57142639160156,"z":"76237122.4d8f48","wires":[["8a2bbd38.66603"]]},{"id":"d9d90af3.2884a8","type":"returnSuccess","name":"return success","xml":"<return status='success'>\n<parameter name='error-code' value='400' />\n<parameter name='error-message' value='Request Processed Successfully' />","comments":"","x":1527.2859420776367,"y":385.71416425704956,"z":"76237122.4d8f48","wires":[]},{"id":"2eb544fc.c3c48c","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":512.28564453125,"y":101.28571319580078,"z":"76237122.4d8f48","wires":[["6b6bf651.3ed8d8"]]},{"id":"d8ece2d5.349b","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='401' />\n<parameter name='error-message' value='Failure Executing getVNF_Hierarchy for Restart' />\n","comments":"","x":881.5714340209961,"y":150.57142579555511,"z":"76237122.4d8f48","wires":[]},{"id":"2b4e617f.7eeeae","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":3465.0000076293945,"y":440.5714588165283,"z":"76237122.4d8f48","wires":[["4c5c0bb9.449ba4"]]},{"id":"7acc1572.5c81c4","type":"execute","name":"execute_update_AA&I","xml":"<execute plugin='org.openecomp.appc.dg.util.ExecuteNodeAction' method='postResource'>\n<parameter name=\"resourceType\" value=\"vnfc\" />\n<parameter name=\"prefix\" value=\"vnfc\" />\n<parameter name=\"resourceKey\" value='vnfc-name = $VNF.VM[$i].VNFC' />\n<parameter name=\"attributeName\" value=\"orchestration-status\" />\n<parameter name=\"attributeValue\" value=\"Restarted\" />\n","comments":"","outputs":1,"x":4301.71378326416,"y":989.1429214477539,"z":"76237122.4d8f48","wires":[["8e6f3e86.104278","f09173b4.8d027"]]},{"id":"8e6f3e86.104278","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":4495.142219543457,"y":1094.2858295440674,"z":"76237122.4d8f48","wires":[["808f2516.f48e5"]]},{"id":"3af83e70.fd66b2","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='401' />\n<parameter name='error-message' value='Failure in executing AAI Update' />\n","comments":"","x":4842.142219543457,"y":1145.2858295440674,"z":"76237122.4d8f48","wires":[]},{"id":"f09173b4.8d027","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":4494.428039550781,"y":897.0000867843628,"z":"76237122.4d8f48","wires":[["20a9cea1.026a02"]]},{"id":"9cc42436.b7ba78","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1829.0000381469727,"y":621.571478843689,"z":"76237122.4d8f48","wires":[["9e840e62.4d5fa"]]},{"id":"d483db33.1492b8","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='401' />\n<parameter name='error-message' value='Error Updating AAI for Restart' />","comments":"","x":2152.57137298584,"y":710.4286470413208,"z":"76237122.4d8f48","wires":[]},{"id":"54c01d97.2b3394","type":"execute","name":"execute_Update_AA&I","xml":"<execute plugin='org.openecomp.appc.dg.util.ExecuteNodeAction' method='postResource'>\n<parameter name=\"resourceType\" value=\"vnfc\" />\n<parameter name=\"prefix\" value=\"vnfc\" />\n<parameter name=\"resourceKey\" value='vnfc-name = $VNF.VM[$i].VNFC' />\n<parameter name=\"attributeName\" value=\"orchestration-status\" />\n<parameter name=\"attributeValue\" value=\"Error\" />\n","comments":"","outputs":1,"x":4827.285980224609,"y":603.7143478393555,"z":"76237122.4d8f48","wires":[["1b99a593.96882a","593ddc08.d1932c"]]},{"id":"1b99a593.96882a","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":5098.999912261963,"y":338.00002574920654,"z":"76237122.4d8f48","wires":[["8ba70c97.a1364"]]},{"id":"f299950d.4d859","type":"comment","name":"update VNFCs to Restarting","info":"","comments":"","x":1834.8574600219727,"y":290.71423721313477,"z":"76237122.4d8f48","wires":[]},{"id":"1c58cddf.791d32","type":"comment","name":"call south bound to Restart VMs","info":"","comments":"","x":3291.4278717041016,"y":261.4285831451416,"z":"76237122.4d8f48","wires":[]},{"id":"a7e926e1.886c6","type":"comment","name":"if failure from south bound then update as Error","info":"","comments":"","x":4822.571907043457,"y":673.1428642272949,"z":"76237122.4d8f48","wires":[]},{"id":"6cf8ad22.83dcbc","type":"comment","name":"Restarted VNFCs in AA&I","info":"","comments":"","x":4332.571113586426,"y":1026.714334487915,"z":"76237122.4d8f48","wires":[]},{"id":"35262f21.9100f","type":"comment","name":"Fetch all VMs and VNFCs from AA&I for given VNF_ID","info":"","comments":"","x":850.7142944335938,"y":181.85714149475098,"z":"76237122.4d8f48","wires":[]},{"id":"593ddc08.d1932c","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":5090.857753753662,"y":431.14294624328613,"z":"76237122.4d8f48","wires":[["d4b0c319.9a46f"]]},{"id":"b3ddc0e0.1fff9","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":3429.285758972168,"y":111.85716247558594,"z":"76237122.4d8f48","wires":[["c81353a7.6ef68"]]},{"id":"70afb7ac.d4b43","type":"switchNode","name":"switch","xml":"<switch test='`$VNF.VMCount`'>\n","comments":"","outputs":1,"x":957.857421875,"y":321.28571701049805,"z":"76237122.4d8f48","wires":[["2ade9368.7afe34","3404e9c.0255e96"]]},{"id":"2ade9368.7afe34","type":"other","name":"outcome_0","xml":"<outcome value='0'>\n","comments":"","outputs":1,"x":1226.2858276367188,"y":101.42858505249023,"z":"76237122.4d8f48","wires":[["4d5fe436.5e2ee4"]]},{"id":"3404e9c.0255e96","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":1175.1430282592773,"y":317.1428813934326,"z":"76237122.4d8f48","wires":[["992597b.2a538e8"]]},{"id":"4c5c0bb9.449ba4","type":"switchNode","name":"switch","xml":"<switch test='`$RESTART_STATUS`'>\n","comments":"","outputs":1,"x":3647.0000076293945,"y":439.5714588165283,"z":"76237122.4d8f48","wires":[["63b90e6f.d2d2e8","2ea31f77.45045","91ee15b4.419a18"]]},{"id":"91ee15b4.419a18","type":"success","name":"outcome_SUCCESS","xml":"<outcome value='SUCCESS'>\n","comments":"","outputs":1,"x":3934.4285583496094,"y":776.0000228881836,"z":"76237122.4d8f48","wires":[["c44c9d2b.b4b058"]]},{"id":"63b90e6f.d2d2e8","type":"other","name":"outcome_CONTEXT_NOT_FOUND","xml":"<outcome value='CONTEXT_NOT_FOUND'>\n","comments":"","outputs":1,"x":3949.857635498047,"y":635.4286317825317,"z":"76237122.4d8f48","wires":[["598a9b9c.115bd4"]]},{"id":"2ea31f77.45045","type":"other","name":"outcome_ERROR","xml":"<outcome value='ERROR'>\n","comments":"","outputs":1,"x":3846.9998474121094,"y":393.0000534057617,"z":"76237122.4d8f48","wires":[["e494a7cc.ad954"]]},{"id":"12cf9135.3bda7f","type":"execute","name":"execute_Restart","xml":"<execute plugin='org.openecomp.appc.adapter.iaas.ProviderAdapter' method='restartServer'>\n<parameter name=\"org.openecomp.appc.provider.name\" value=\"OpenStack\"/>\n<parameter name=\"org.openecomp.appc.instance.url\" value=\"`$VNF.VM[$i].URL`\" />\n<parameter name=\"org.openecomp.appc.identity.url\" value=\"`$AICIdentity`\" />\n\n","comments":"","outputs":1,"x":3289.2858657836914,"y":328.8571901321411,"z":"76237122.4d8f48","wires":[["2b4e617f.7eeeae","b3ddc0e0.1fff9"]]},{"id":"282079d0.792d6e","type":"switchNode","name":"switch","xml":"<switch test='`$getVnfHierarchy_result`'>\n","comments":"","outputs":1,"x":665.5714340209961,"y":321.8572082519531,"z":"76237122.4d8f48","wires":[["f2fb0b35.b61a9","a8a2f5bd.c272e"]]},{"id":"a8a2f5bd.c272e","type":"outcome","name":"FAILURE","xml":"<outcome value='FAILURE'>\n","comments":"","outputs":1,"x":813.7858428955078,"y":592.5714192390442,"z":"76237122.4d8f48","wires":[["fefc4920.d5b7a"]]},{"id":"7b79e36d.328a4c","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='401' />\n<parameter name='error-message' value='Failure Getting VNF Hierarchy for Restart VNF' />\n","comments":"","x":1294.3571891784668,"y":669.285737991333,"z":"76237122.4d8f48","wires":[]},{"id":"f2fb0b35.b61a9","type":"outcome","name":"SUCCESS","xml":"<outcome value='SUCCESS'>\n","comments":"","outputs":1,"x":817.9999771118164,"y":322.1429080963135,"z":"76237122.4d8f48","wires":[["70afb7ac.d4b43"]]},{"id":"deade084.623ea","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='401' />\n<parameter name='error-message' value='No VMs found for Restart VNF' />","comments":"","x":1580.5717468261719,"y":155.8571014404297,"z":"76237122.4d8f48","wires":[]},{"id":"8a2bbd38.66603","type":"switchNode","name":"switch","xml":"<switch test='`$postResource_result`'>\n","comments":"","outputs":1,"x":2352.4286003112793,"y":322.4285650253296,"z":"76237122.4d8f48","wires":[["3899747f.c0a31c","94a2e9b7.93572","e1f4d0ee.650578"]]},{"id":"3899747f.c0a31c","type":"outcome","name":"SUCCESS","xml":"<outcome value='SUCCESS'>\n","comments":"","outputs":1,"x":3078.0001907348633,"y":333.7142677307129,"z":"76237122.4d8f48","wires":[["12cf9135.3bda7f"]]},{"id":"94a2e9b7.93572","type":"outcome","name":"NOT_FOUND","xml":"<outcome value='NOT_FOUND'>\n","comments":"","outputs":1,"x":2457.1429176330566,"y":105.4286117553711,"z":"76237122.4d8f48","wires":[["6a7cc031.dd3bb"]]},{"id":"1cfef78b.034338","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='401' />\n<parameter name='error-message' value='Unable to send Post Request to update AAI' />","comments":"","x":2848.142868041992,"y":197.4285430908203,"z":"76237122.4d8f48","wires":[]},{"id":"e1f4d0ee.650578","type":"outcome","name":"FAILURE","xml":"<outcome value='FAILURE'>\n","comments":"","outputs":1,"x":2469.7142753601074,"y":613.857063293457,"z":"76237122.4d8f48","wires":[["25d36ac2.f86636"]]},{"id":"8bcc88bd.d2d308","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='401' />\n<parameter name='error-message' value='Post Failure Executing Update AAI for Restart' />","comments":"","x":2789.5710678100586,"y":709.2857112884521,"z":"76237122.4d8f48","wires":[]},{"id":"20a9cea1.026a02","type":"switchNode","name":"switch","xml":"<switch test='`$postResource_result`'>\n","comments":"","outputs":1,"x":4657.142288208008,"y":897.428671836853,"z":"76237122.4d8f48","wires":[["f2c187dc.97f93","a4b5e1b6.450d5","81bee4af.a55218"]]},{"id":"f2c187dc.97f93","type":"outcome","name":"SUCCESS","xml":"<outcome value='SUCCESS'>\n","comments":"","outputs":1,"x":4842.856781005859,"y":896.1429166793823,"z":"76237122.4d8f48","wires":[[]]},{"id":"a4b5e1b6.450d5","type":"outcome","name":"NOT_FOUND","xml":"<outcome value='NOT_FOUND'>\n","comments":"","outputs":1,"x":4847.856986999512,"y":828.2857484817505,"z":"76237122.4d8f48","wires":[["c9bc49b8.f0e47"]]},{"id":"81bee4af.a55218","type":"outcome","name":"FAILURE","xml":"<outcome value='FAILURE'>\n","comments":"","outputs":1,"x":4830.856498718262,"y":962.142897605896,"z":"76237122.4d8f48","wires":[["26e33f48.5398d"]]},{"id":"ff047eb4.c17fe8","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='401' />\n<parameter name='error-message' value='Failure in executing AAI Update-Not Found' />","comments":"","x":5211.285415649414,"y":890.8571405410767,"z":"76237122.4d8f48","wires":[]},{"id":"25e417c8.6e10b","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='401' />\n<parameter name='error-message' value='Failure in executing AAI Update' />","comments":"","x":5238.714195251465,"y":1012.4285669326782,"z":"76237122.4d8f48","wires":[]},{"id":"8ba70c97.a1364","type":"switchNode","name":"switch","xml":"<switch test='`$postResource_result`'>\n","comments":"","outputs":1,"x":5225.429107666016,"y":331.8571615219116,"z":"76237122.4d8f48","wires":[["88573775.f10da8","ea09f654.83692","2912d230.9bdb2e"]]},{"id":"88573775.f10da8","type":"outcome","name":"SUCCESS","xml":"<outcome value='SUCCESS'>\n","comments":"","outputs":1,"x":5473.142833709717,"y":278.0000228881836,"z":"76237122.4d8f48","wires":[["af42b5db.8227f"]]},{"id":"af42b5db.8227f","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='401' />\n<parameter name='error-message' value='Restart Failure' />\n","comments":"","x":5725.000324249268,"y":277.00002098083496,"z":"76237122.4d8f48","wires":[]},{"id":"ea09f654.83692","type":"outcome","name":"NOT_FOUND","xml":"<outcome value='NOT_FOUND'>\n","comments":"","outputs":1,"x":5475.143047332764,"y":332.85716438293457,"z":"76237122.4d8f48","wires":[["43d57c4e.156fac"]]},{"id":"2912d230.9bdb2e","type":"outcome","name":"FAILURE","xml":"<outcome value='FAILURE'>\n","comments":"","outputs":1,"x":5468.000049591064,"y":398.42859840393066,"z":"76237122.4d8f48","wires":[["7671564a.958ba"]]},{"id":"6b6bf651.3ed8d8","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":676.2856864929199,"y":100.99999713897705,"z":"76237122.4d8f48","wires":[["1b3b4748.7ec0e1","d8ece2d5.349b"]]},{"id":"1b3b4748.7ec0e1","type":"execute","name":"execute","xml":"<execute plugin='org.openecomp.appc.dg.common.DCAEReporterPlugin' method='report' >\n<parameter name=\"apiVer\" value=\"1.01\"/>\n<parameter name=\"eventId\" value=\"`$input.action-identifiers.vnf-id`\" />\n<parameter name=\"output.status.message\" value=\"Exception in getting VNF Hierachy\" />\n\n","comments":"","outputs":1,"x":881.4285926818848,"y":99.85714149475098,"z":"76237122.4d8f48","wires":[["352423d8.e1a40c"]]},{"id":"352423d8.e1a40c","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":1028.1428756713867,"y":96.14285659790039,"z":"76237122.4d8f48","wires":[[]]},{"id":"fefc4920.d5b7a","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":1083.023910522461,"y":594.7620143890381,"z":"76237122.4d8f48","wires":[["7b79e36d.328a4c","e0a68b8a.5d9a"]]},{"id":"e0a68b8a.5d9a","type":"execute","name":"execute","xml":"<execute plugin='org.openecomp.appc.dg.common.DCAEReporterPlugin' method='report' >\n<parameter name=\"apiVer\" value=\"1.01\"/>\n<parameter name=\"eventId\" value=\"`$input.action-identifiers.vnf-id`\" />\n<parameter name=\"output.status.message\" value=\"Failure in getting VNF Hierachy\" />","comments":"","outputs":1,"x":1275.928638458252,"y":594.1429443359375,"z":"76237122.4d8f48","wires":[["51e3f701.5c90b8"]]},{"id":"51e3f701.5c90b8","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":1457.2144165039062,"y":593.5715417861938,"z":"76237122.4d8f48","wires":[[]]},{"id":"4d5fe436.5e2ee4","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":1406.571662902832,"y":102.85717391967773,"z":"76237122.4d8f48","wires":[["deade084.623ea","7c06295f.82733"]]},{"id":"7c06295f.82733","type":"execute","name":"execute","xml":"<execute plugin='org.openecomp.appc.dg.common.DCAEReporterPlugin' method='report' >\n<parameter name=\"apiVer\" value=\"1.01\"/>\n<parameter name=\"eventId\" value=\"`$input.action-identifiers.vnf-id`\" />\n<parameter name=\"output.status.message\" value=\"VM Count is 0\" />\n","comments":"","outputs":1,"x":1590.0003547668457,"y":99.8571424484253,"z":"76237122.4d8f48","wires":[["4a80414d.b576e"]]},{"id":"4a80414d.b576e","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":1763.8574447631836,"y":101.57139015197754,"z":"76237122.4d8f48","wires":[[]]},{"id":"9e840e62.4d5fa","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":1976.571434020996,"y":620.1428813934326,"z":"76237122.4d8f48","wires":[["ab7061d4.c278f8","d483db33.1492b8"]]},{"id":"ab7061d4.c278f8","type":"execute","name":"execute","xml":"<execute plugin='org.openecomp.appc.dg.common.DCAEReporterPlugin' method='report' >\n<parameter name=\"apiVer\" value=\"1.01\"/>\n<parameter name=\"eventId\" value=\"`$input.action-identifiers.vnf-id`\" />\n<parameter name=\"output.status.message\" value=\"`'Failure in updating AAI for' + $VNF.VM[$i].VNFC`\" />\n","comments":"","outputs":1,"x":2148.000244140625,"y":617.0000610351562,"z":"76237122.4d8f48","wires":[["bf780946.f63478"]]},{"id":"bf780946.f63478","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":2281.28564453125,"y":616.857177734375,"z":"76237122.4d8f48","wires":[[]]},{"id":"25d36ac2.f86636","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":2634.2854232788086,"y":611.2856788635254,"z":"76237122.4d8f48","wires":[["42ba4590.0ef4d4","8bcc88bd.d2d308"]]},{"id":"42ba4590.0ef4d4","type":"execute","name":"execute","xml":"<execute plugin='org.openecomp.appc.dg.common.DCAEReporterPlugin' method='report' >\n<parameter name=\"apiVer\" value=\"1.01\"/>\n<parameter name=\"eventId\" value=\"`$input.action-identifiers.vnf-id`\" />\n<parameter name=\"output.status.message\" value=\"`'Exception in AAI Update for vnfc ' + $VNF.VM[$i].VNFC`\" />\n\n","comments":"","outputs":1,"x":2791.28564453125,"y":612.142822265625,"z":"76237122.4d8f48","wires":[["7c3f2bbd.1fd71c"]]},{"id":"7c3f2bbd.1fd71c","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":2918.428066253662,"y":611.8570718765259,"z":"76237122.4d8f48","wires":[[]]},{"id":"6a7cc031.dd3bb","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":2645.714412689209,"y":101.42860984802246,"z":"76237122.4d8f48","wires":[["49425c65.53c53c","1cfef78b.034338"]]},{"id":"49425c65.53c53c","type":"execute","name":"execute","xml":"<execute plugin='org.openecomp.appc.dg.common.DCAEReporterPlugin' method='report' >\n<parameter name=\"apiVer\" value=\"1.01\"/>\n<parameter name=\"eventId\" value=\"`$input.action-identifiers.vnf-id`\" />\n<parameter name=\"output.status.message\" value=\"`'VNFC not found in AAI : ' + $VNF.VM[$i].VNFC`\" />\n","comments":"","outputs":1,"x":2845.4287300109863,"y":100.85716533660889,"z":"76237122.4d8f48","wires":[["c5a3e45a.f50a48"]]},{"id":"c5a3e45a.f50a48","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":3004.8572311401367,"y":100.00004768371582,"z":"76237122.4d8f48","wires":[[]]},{"id":"c81353a7.6ef68","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":4657.856857299805,"y":113.57143783569336,"z":"76237122.4d8f48","wires":[["514c0ac8.097fb4","54c01d97.2b3394"]]},{"id":"514c0ac8.097fb4","type":"execute","name":"Report_Failure_in_Restart","xml":"<execute plugin='org.openecomp.appc.dg.common.DCAEReporterPlugin' method='report' >\n<parameter name=\"apiVer\" value=\"1.01\"/>\n<parameter name=\"eventId\" value=\"`$input.action-identifiers.vnf-id`\" />\n<parameter name=\"output.status.message\" value=\"`'Failure in restart for:' + $VNF.VM[$i].URL`\" />","comments":"","outputs":1,"x":4877.428768157959,"y":140.285737991333,"z":"76237122.4d8f48","wires":[["3405fc93.cf7054"]]},{"id":"3405fc93.cf7054","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":5061.428413391113,"y":142.2857437133789,"z":"76237122.4d8f48","wires":[[]]},{"id":"598a9b9c.115bd4","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":4232.428771972656,"y":629.5714626312256,"z":"76237122.4d8f48","wires":[["54c01d97.2b3394","781448e0.b2762"]]},{"id":"781448e0.b2762","type":"execute","name":"Report_Context_not_found","xml":"<execute plugin='org.openecomp.appc.dg.common.DCAEReporterPlugin' method='report' >\n<parameter name=\"apiVer\" value=\"1.01\"/>\n<parameter name=\"eventId\" value=\"`$input.action-identifiers.vnf-id`\" />\n<parameter name=\"output.status.message\" value=\"`'Stop : Context not found:' + $VNF.VM[$i].URL`\" />","comments":"","outputs":1,"x":4441.571556091309,"y":374.571475982666,"z":"76237122.4d8f48","wires":[["ec449a48.29393"]]},{"id":"ec449a48.29393","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":4809.430023193359,"y":385.1428756713867,"z":"76237122.4d8f48","wires":[[]]},{"id":"e494a7cc.ad954","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":4064.4290466308594,"y":369.0000228881836,"z":"76237122.4d8f48","wires":[["54c01d97.2b3394","24630fd2.80be7"]]},{"id":"24630fd2.80be7","type":"execute","name":"Report_Error_occoured_while_restarting_the_server","xml":"<execute plugin='org.openecomp.appc.dg.common.DCAEReporterPlugin' method='report' >\n<parameter name=\"apiVer\" value=\"1.01\"/>\n<parameter name=\"eventId\" value=\"`$input.action-identifiers.vnf-id`\" />\n<parameter name=\"output.status.message\" value=\"`'Stop : Error occoured while restarting the server:' + $VNF.VM[$i].URL`\" />","comments":"","outputs":1,"x":4259.857406616211,"y":229.85715770721436,"z":"76237122.4d8f48","wires":[["9510a9d9.3e8fe"]]},{"id":"9510a9d9.3e8fe","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":4602.429046630859,"y":206.99999237060547,"z":"76237122.4d8f48","wires":[[]]},{"id":"c9bc49b8.f0e47","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":5044.857124328613,"y":826.7143201828003,"z":"76237122.4d8f48","wires":[["ba187bf7.332728","ff047eb4.c17fe8"]]},{"id":"26e33f48.5398d","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":5041.713916778564,"y":958.8571300506592,"z":"76237122.4d8f48","wires":[["41e687a9.7af44","25e417c8.6e10b"]]},{"id":"808f2516.f48e5","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":4632.142219543457,"y":1090.2858295440674,"z":"76237122.4d8f48","wires":[["ca40f2e2.74f2b8","3af83e70.fd66b2"]]},{"id":"ba187bf7.332728","type":"execute","name":"execute","xml":"<execute plugin='org.openecomp.appc.dg.common.DCAEReporterPlugin' method='report' >\n<parameter name=\"apiVer\" value=\"1.01\"/>\n<parameter name=\"eventId\" value=\"`$input.action-identifiers.vnf-id`\" />\n<parameter name=\"output.status.message\" value=\"`'VNFC not found in AAI : ' + $VNF.VM[$i].VNFC`\" />","comments":"","outputs":1,"x":5209.142913818359,"y":825.5714340209961,"z":"76237122.4d8f48","wires":[["912d407a.aaa748"]]},{"id":"41e687a9.7af44","type":"execute","name":"execute","xml":"<execute plugin='org.openecomp.appc.dg.common.DCAEReporterPlugin' method='report' >\n<parameter name=\"apiVer\" value=\"1.01\"/>\n<parameter name=\"eventId\" value=\"`$input.action-identifiers.vnf-id`\" />\n<parameter name=\"output.status.message\" value=\"`'Exception in AAI Update for vnfc' + $VNF.VM[$i].VNFC`\" />","comments":"","outputs":1,"x":5224.999771118164,"y":957.5713906288147,"z":"76237122.4d8f48","wires":[["1ba5c202.2c79ae"]]},{"id":"912d407a.aaa748","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":5382.142486572266,"y":830.2857761383057,"z":"76237122.4d8f48","wires":[[]]},{"id":"1ba5c202.2c79ae","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":5392.285621643066,"y":955.857105255127,"z":"76237122.4d8f48","wires":[[]]},{"id":"ca40f2e2.74f2b8","type":"execute","name":"execute","xml":"<execute plugin='org.openecomp.appc.dg.common.DCAEReporterPlugin' method='report' >\n<parameter name=\"apiVer\" value=\"1.01\"/>\n<parameter name=\"eventId\" value=\"`$input.action-identifiers.vnf-id`\" />\n<parameter name=\"output.status.message\" value=\"`'Failure in updating AAI for' + $VNF.VM[$i].VNFC`\" />","comments":"","outputs":1,"x":4834.428146362305,"y":1086.1429538726807,"z":"76237122.4d8f48","wires":[["af768804.ee793"]]},{"id":"af768804.ee793","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":4991.999572753906,"y":1080.1429538726807,"z":"76237122.4d8f48","wires":[[]]},{"id":"e4d3626c.a0fa6","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='401' />\n<parameter name='error-message' value='Failure in executing AAI update-Restart Failure' />","comments":"","x":5386.999938964844,"y":698.9999990463257,"z":"76237122.4d8f48","wires":[]},{"id":"d4b0c319.9a46f","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":5211,"y":608.7142333984375,"z":"76237122.4d8f48","wires":[["a6b27f04.fc8878","e4d3626c.a0fa6"]]},{"id":"a6b27f04.fc8878","type":"execute","name":"execute","xml":"<execute plugin='org.openecomp.appc.dg.common.DCAEReporterPlugin' method='report' >\n<parameter name=\"apiVer\" value=\"1.01\"/>\n<parameter name=\"eventId\" value=\"`$input.action-identifiers.vnf-id`\" />\n<parameter name=\"output.status.message\" value=\"`'Failure in updating AAI for' + $VNF.VM[$i].VNFC`\" />\n","comments":"","outputs":1,"x":5382.428810119629,"y":605.571403503418,"z":"76237122.4d8f48","wires":[["3e91ccc8.85d67c"]]},{"id":"3e91ccc8.85d67c","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":5515.714210510254,"y":605.4285297393799,"z":"76237122.4d8f48","wires":[[]]},{"id":"dd1dfd8.903558","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='401' />\n<parameter name='error-message' value='Not Found - Failure in executing AAI Update' />","comments":"","x":6096,"y":417,"z":"76237122.4d8f48","wires":[]},{"id":"43d57c4e.156fac","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":5888.57177734375,"y":337.00006103515625,"z":"76237122.4d8f48","wires":[["42ea74d4.16cccc","dd1dfd8.903558"]]},{"id":"42ea74d4.16cccc","type":"execute","name":"execute","xml":"<execute plugin='org.openecomp.appc.dg.common.DCAEReporterPlugin' method='report' >\n<parameter name=\"apiVer\" value=\"1.01\"/>\n<parameter name=\"eventId\" value=\"`$input.action-identifiers.vnf-id`\" />\n<parameter name=\"output.status.message\" value=\"`'VNFC not found in AAI : ' + $VNF.VM[$i].VNFC`\" />\n","comments":"","outputs":1,"x":6093.285861968994,"y":320.4286222457886,"z":"76237122.4d8f48","wires":[["6996a764.44535"]]},{"id":"6996a764.44535","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":6252.7143630981445,"y":319.5715045928955,"z":"76237122.4d8f48","wires":[[]]},{"id":"8f65492b.55ed38","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='401' />\n<parameter name='error-message' value='Not Found - Failure in executing AAI Update-Restart Failure' />","comments":"","x":5829,"y":591,"z":"76237122.4d8f48","wires":[]},{"id":"7671564a.958ba","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":5673.71435546875,"y":492.99996757507324,"z":"76237122.4d8f48","wires":[["7d30fcb8.6cbf3c","8f65492b.55ed38"]]},{"id":"7d30fcb8.6cbf3c","type":"execute","name":"execute","xml":"<execute plugin='org.openecomp.appc.dg.common.DCAEReporterPlugin' method='report' >\n<parameter name=\"apiVer\" value=\"1.01\"/>\n<parameter name=\"eventId\" value=\"`$input.action-identifiers.vnf-id`\" />\n<parameter name=\"output.status.message\" value='Exception in AAI Update for vnfc $VNF.VM[$i].VNFC' />\n","comments":"","outputs":1,"x":5830.714576721191,"y":493.85711097717285,"z":"76237122.4d8f48","wires":[["ed78b3c0.d115c"]]},{"id":"ed78b3c0.d115c","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":5957.8569984436035,"y":493.57136058807373,"z":"76237122.4d8f48","wires":[[]]},{"id":"c44c9d2b.b4b058","type":"execute","name":"Report_Success_in_Restart","xml":"<execute plugin='org.openecomp.appc.dg.common.DCAEReporterPlugin' method='reportSuccess' >\n<parameter name=\"eventId\" value=\"`$input.action-identifiers.vnf-id`\" />\n<parameter name=\"output.status.message\" value=\"`'Restart event executed successfully for ' + $VNF.VM[$i].URL`\" />\n","comments":"","outputs":1,"x":3792.3333435058594,"y":983.6667098999023,"z":"76237122.4d8f48","wires":[["98f4dea2.cb6408","409e7825.7f9fa"]]},{"id":"98f4dea2.cb6408","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":4018.333333333334,"y":1025.6666641235352,"z":"76237122.4d8f48","wires":[["7acc1572.5c81c4"]]},{"id":"409e7825.7f9fa","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":4052.333333333334,"y":917.6666641235352,"z":"76237122.4d8f48","wires":[[]]},{"id":"5488fab3.57f39c","type":"switchNode","name":"switch action-level","xml":"<switch test='`$action-level`'>\n","comments":"","outputs":1,"x":104.75,"y":264.75,"z":"76237122.4d8f48","wires":[["67a7758c.c40c6c","8b5b95c.f141068"]]},{"id":"67a7758c.c40c6c","type":"outcome","name":"VNF","xml":"<outcome value='VNF'>\n","comments":"","outputs":1,"x":323.75,"y":199.75,"z":"76237122.4d8f48","wires":[["8956d543.9797d8"]]},{"id":"8b5b95c.f141068","type":"outcome","name":"VM","xml":"<outcome value='VM'>\n","comments":"","outputs":1,"x":245.75,"y":925.75,"z":"76237122.4d8f48","wires":[["6e7ad6d8.07ba28"]]},{"id":"6e7ad6d8.07ba28","type":"call","name":"call RestartVMCommonFlow","xml":"<call module='APPC' rpc='RestartVMCommonFlow' mode='sync' >\n","comments":"","outputs":1,"x":470.75,"y":922.75,"z":"76237122.4d8f48","wires":[["a231bce9.8680d8","df85fd94.79bb88","1c94f66a.e9da0a"]]},{"id":"a231bce9.8680d8","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":695.75,"y":848.75,"z":"76237122.4d8f48","wires":[["8661ca99.58a64"]]},{"id":"df85fd94.79bb88","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":696.25,"y":916.75,"z":"76237122.4d8f48","wires":[["8661ca99.58a64"]]},{"id":"8661ca99.58a64","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">\n\n","atomic":"true","comments":"","outputs":1,"x":904,"y":884.25,"z":"76237122.4d8f48","wires":[["76722d8f.9bed0c"]]},{"id":"cec6e922.502108","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","comments":"","outputs":1,"x":871.75,"y":962.75,"z":"76237122.4d8f48","wires":[["bd1a4c90.4ebcc8"]]},{"id":"1c94f66a.e9da0a","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":693.9999942779541,"y":969.7499914169312,"z":"76237122.4d8f48","wires":[["cec6e922.502108"]]},{"id":"bd1a4c90.4ebcc8","type":"returnSuccess","name":"return success","xml":"<return status='success'>\n<parameter name='error-code' value='400' />\n<parameter name='error-message' value='Request Processed Successfully' />","comments":"","x":1053.75,"y":960.75,"z":"76237122.4d8f48","wires":[]},{"id":"76722d8f.9bed0c","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='401' />\n<parameter name='error-message' value='`$error-message`' />\n","comments":"","x":1073.75,"y":881.75,"z":"76237122.4d8f48","wires":[]},{"id":"800fc755.a7459","type":"comment","name":"Check action-level, call VM restart if action level is VM","info":"","comments":"","x":192.5,"y":329.75,"z":"76237122.4d8f48","wires":[]},{"id":"775b5f1e.dace48","type":"comment","name":"Call DG for VM level Restart - parameters are in context","info":"","comments":"","x":402.75,"y":833.75,"z":"76237122.4d8f48","wires":[]}]
