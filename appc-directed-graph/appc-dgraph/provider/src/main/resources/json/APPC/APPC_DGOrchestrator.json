/*-
 * ============LICENSE_START=======================================================
 * ONAP : APP-C
 * ================================================================================
 * Copyright (C) 2017 AT&T Intellectual Property.  All rights reserved.
 * ================================================================================
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 *      http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ============LICENSE_END=========================================================
 */

[{"id":"be33b5c6.f20c28","type":"dgstart","name":"DGSTART","outputs":1,"x":124.75,"y":93.75,"z":"fd9000dc.f5d3d","wires":[["4c6cd768.a6e2c8"]]},{"id":"4c6cd768.a6e2c8","type":"service-logic","name":"APPC 4.0.0","module":"APPC","version":"4.0.0","comments":"","xml":"<service-logic xmlns='http://www.openecomp.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.openecomp.org/sdnc/svclogic ./svclogic.xsd' module='APPC' version='4.0.0'>","outputs":1,"x":310.178560256958,"y":90.25,"z":"fd9000dc.f5d3d","wires":[["f4d82a0c.2e0258"]]},{"id":"f4d82a0c.2e0258","type":"method","name":"method DGOrchestrator","xml":"<method rpc='DGOrchestrator' mode='sync'>\n","comments":"","outputs":1,"x":514.7262020111084,"y":79.75,"z":"fd9000dc.f5d3d","wires":[["dc30f869.1cf2f"]]},{"id":"dc30f869.1cf2f","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","comments":"","outputs":1,"x":120.99207878112793,"y":213.45237159729004,"z":"fd9000dc.f5d3d","wires":[["f82fb637.510eb","3c192762.75985","509cd757.36a6","e8368977.8442a8"]]},{"id":"e8368977.8442a8","type":"call","name":"call: setInputParams","xml":"<call module=\"APPC\" rpc=\"setInputParams\" mode=\"sync\">","comments":"","outputs":1,"x":554.4166851043701,"y":149.41666221618652,"z":"fd9000dc.f5d3d","wires":[["5a5e96b8.1ceb4","f5e748b.6b0a6b8","49a9602b.849108"]]},{"id":"212949d5.4ee156","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1240.166748046875,"y":366.1666564941406,"z":"fd9000dc.f5d3d","wires":[["7f30608a.f337e8"]]},{"id":"84df469f.3e0c2","type":"execute","name":"execute get and executeFlowSequence","xml":"<execute plugin=\"org.openecomp.appc.flow.controller.node.FlowControlNode\" method=\"processFlow\">\n<parameter name=\"messageType\" value=\"response\" />\n<parameter name=\"message\" value=\"`$tmp.message`\" />\n<parameter name=\"responsePrefix\" value=\"tmp.flowControl\" />\n","comments":"","outputs":1,"x":985.6270751953125,"y":395.4801330566406,"z":"fd9000dc.f5d3d","wires":[["212949d5.4ee156","99d21d74.00ea68"]]},{"id":"7f30608a.f337e8","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","comments":"","outputs":1,"x":1409.547607421875,"y":368.6904602050781,"z":"fd9000dc.f5d3d","wires":[["a9f19613.ed1ca"]]},{"id":"caf8c957.f6dfd","type":"set","name":"set error-code 400 and message","xml":"<set>\n<parameter name='error-code' value='400' />\n<parameter name='error-message' value=\"SUCCESS - request has been processed successfully\" />\n<parameter name='output-payload' value=\"`'state : ' + $output.payload.state` \" />\n","comments":"","x":1650.023681640625,"y":431.9166259765625,"z":"fd9000dc.f5d3d","wires":[]},{"id":"99d21d74.00ea68","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":1237.71435546875,"y":419.1666259765625,"z":"fd9000dc.f5d3d","wires":[["629d72f.45afc0c"]]},{"id":"629d72f.45afc0c","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","comments":"","outputs":1,"x":1415.59521484375,"y":422.15472412109375,"z":"fd9000dc.f5d3d","wires":[["caf8c957.f6dfd"]]},{"id":"a9f19613.ed1ca","type":"set","name":"set error-code 401 and message","xml":"<set>\n<parameter name='error-code' value='401' />\n<parameter name='error-message' value=\"`$tmp.flowControl.status-message`\" />\n<parameter name='output-payload' value=\"\" />\n","comments":"","x":1654.8333740234375,"y":365.2975769042969,"z":"fd9000dc.f5d3d","wires":[]},{"id":"3c192762.75985","type":"execute","name":"execute saveTxLog","xml":"<execute plugin=\"org.openecomp.appc.data.services.node.ConfigResourceNode\" method=\"saveConfigTransactionLog\">\n<parameter name=\"messageType\" value=\"response\" />\n<parameter name=\"message\" value=\"`$tmp.message`\" />\n<parameter name=\"responsePrefix\" value=\"tmp.saveTxLog\" />\n","comments":"","outputs":1,"x":428.6666316986084,"y":769.6389026641846,"z":"fd9000dc.f5d3d","wires":[["8bbc0ff6.7dc998"]]},{"id":"8bbc0ff6.7dc998","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":666.7777156829834,"y":770.5555286407471,"z":"fd9000dc.f5d3d","wires":[["813ebbd4.36c0b"]]},{"id":"813ebbd4.36c0b","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","comments":"","outputs":1,"x":892.2500133514404,"y":772.1388416290283,"z":"fd9000dc.f5d3d","wires":[[]]},{"id":"f82fb637.510eb","type":"set","name":"set tmp.message","xml":"<set>\n<parameter name=\"tmp.message\" value=\"`$error-code + ':' + $error-message`\"/>\n","comments":"","x":449.1110897064209,"y":663.4999809265137,"z":"fd9000dc.f5d3d","wires":[]},{"id":"5a5e96b8.1ceb4","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":867.2500133514404,"y":98.91666316986084,"z":"fd9000dc.f5d3d","wires":[["1979616f.c95eb7"]]},{"id":"f5e748b.6b0a6b8","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":864.7500133514404,"y":170.91666412353516,"z":"fd9000dc.f5d3d","wires":[["1979616f.c95eb7"]]},{"id":"1979616f.c95eb7","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">\n\n","atomic":"true","comments":"","outputs":1,"x":1611.5,"y":95.41668701171875,"z":"fd9000dc.f5d3d","wires":[[]]},{"id":"509cd757.36a6","type":"switchNode","name":"switch error-code","xml":"<switch test='`$error-code`'>\n","comments":"","outputs":1,"x":477.2500057220459,"y":485.16666984558105,"z":"fd9000dc.f5d3d","wires":[["7db7a99f.54a8a8","81563318.4c1248"]]},{"id":"7db7a99f.54a8a8","type":"success","name":"outcome: 400","xml":"<outcome value=\"400\">","comments":"","outputs":1,"x":725.2500095367432,"y":464.16666984558105,"z":"fd9000dc.f5d3d","wires":[["33eae567.c4ef32"]]},{"id":"81563318.4c1248","type":"success","name":"outcome: Other","xml":"<outcome value=\"Other\">","comments":"","outputs":1,"x":723.5000095367432,"y":579.1666717529297,"z":"fd9000dc.f5d3d","wires":[["3ca59ecb.d0901a"]]},{"id":"33eae567.c4ef32","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":976.5000133514404,"y":465.16666984558105,"z":"fd9000dc.f5d3d","wires":[["cceb70bd.448bf8"]]},{"id":"3ca59ecb.d0901a","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":988.5000114440918,"y":585.4166717529297,"z":"fd9000dc.f5d3d","wires":[["52806fa.179521"]]},{"id":"cceb70bd.448bf8","type":"set","name":"set Status for dispatcher","xml":"<set>\n<parameter name='SvcLogic.status' value='success' />\n<parameter name='output.status.code' value='`$error-code`' />\n<parameter name='output.status.message' value='`$error-message`' />","comments":"","x":1259.5000133514404,"y":466.66666984558105,"z":"fd9000dc.f5d3d","wires":[]},{"id":"52806fa.179521","type":"set","name":"set Status for dispatcher","xml":"<set>\n<parameter name='SvcLogic.status' value='failure' />\n<parameter name='output.status.code' value='`$error-code`' />\n<parameter name='output.status.message' value='`$error-message`' />\n","comments":"","x":1264.000020980835,"y":587.6666707992554,"z":"fd9000dc.f5d3d","wires":[]},{"id":"d2e5bf05.25d308","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","comments":"","outputs":1,"x":536.0000057220459,"y":226.41666507720947,"z":"fd9000dc.f5d3d","wires":[["8a4dbd4d.32aca","8b68a368.08cbd","15f6ca12.22ba66"]]},{"id":"49a9602b.849108","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":337.25000762939453,"y":231.41666507720947,"z":"fd9000dc.f5d3d","wires":[["d2e5bf05.25d308"]]},{"id":"8a4dbd4d.32aca","type":"execute","name":"execute getCapability","xml":"<execute plugin=\"org.openecomp.appc.data.services.node.ConfigResourceNode\" method=\"getCapability\">\n<parameter name=\"caplevel\" value=\"`$action-level`\" />\n<parameter name=\"checkCapability\" value=\"`$request-action`\" />\n<parameter name=\"vnf-type\" value=\"`$vnf-type`\" />\n<parameter name=\"responsePrefix\" value=\"tmp.flowControl\" />\n","comments":"","outputs":1,"x":651.75,"y":290.5,"z":"fd9000dc.f5d3d","wires":[["10a69307.3351b5","1addf78a.9378c"]]},{"id":"64d092ba.1e7874","type":"switchNode","name":"switch capability-result","xml":"<switch test='`$capability-result`'>\n","comments":"","outputs":1,"x":1045.75,"y":229.5,"z":"fd9000dc.f5d3d","wires":[["dca0e548.50fd4","d41c1ff3.69d1","f7b42900.0c913"]]},{"id":"dca0e548.50fd4","type":"success","name":"outcome: Not-Supported","xml":"<outcome value=\"Not-Supported\">","comments":"","outputs":1,"x":1286.75,"y":170.5,"z":"fd9000dc.f5d3d","wires":[["b13dd342.2c93e8"]]},{"id":"d41c1ff3.69d1","type":"success","name":"outcome: Supported","xml":"<outcome value=\"Supported\">","comments":"","outputs":1,"x":1275,"y":216.5,"z":"fd9000dc.f5d3d","wires":[["1961eaae.696d8d"]]},{"id":"1addf78a.9378c","type":"failure","name":"Other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":842.75,"y":272.5,"z":"fd9000dc.f5d3d","wires":[["85d37b3.5760408"]]},{"id":"10a69307.3351b5","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":853.2976684570312,"y":230.49996948242188,"z":"fd9000dc.f5d3d","wires":[["64d092ba.1e7874"]]},{"id":"b13dd342.2c93e8","type":"set","name":"set error-code 450 and message","xml":"<set>\n<parameter name='error-code' value='450' />\n<parameter name='error-message' value=\"Request not supported\" />\n<parameter name='output-payload' value=\"\" />","comments":"","x":1551.75,"y":170.5,"z":"fd9000dc.f5d3d","wires":[]},{"id":"1961eaae.696d8d","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","comments":"","outputs":1,"x":1773.75,"y":240.5,"z":"fd9000dc.f5d3d","wires":[["84df469f.3e0c2"]]},{"id":"8b68a368.08cbd","type":"record","name":"record","xml":"<record plugin=\"org.openecomp.sdnc.sli.recording.Slf4jRecorder\">\n<parameter name=\"level\" value=\"info\"/>\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"field2\" value=\"` 'Capabilities results will be - '+$capability-result`\" />","comments":"","outputs":1,"x":692.75,"y":241.5,"z":"fd9000dc.f5d3d","wires":[[]]},{"id":"15f6ca12.22ba66","type":"set","name":"set capability-result","xml":"<set>\n<parameter name='capability-result' value=\"`'tmp.flowControl.capabilities.'+ $action-level + '.' + $request-action`\"/>\n","comments":"","x":723.75,"y":194.5,"z":"fd9000dc.f5d3d","wires":[]},{"id":"f7b42900.0c913","type":"other","name":"Other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":1247.75,"y":252.5,"z":"fd9000dc.f5d3d","wires":[["85d37b3.5760408"]]},{"id":"e93f7684.b28d88","type":"set","name":"set error code 401","xml":"<set>\n<parameter name='error-code' value='401' />\n<parameter name='error-message' value=\"Error getting capabilities information\" />\n<parameter name='output-payload' value=\"\" />\n","comments":"","x":1489.75,"y":275.75,"z":"fd9000dc.f5d3d","wires":[]},{"id":"85d37b3.5760408","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">\n\n","atomic":"true","comments":"","outputs":1,"x":1275.75,"y":299.75,"z":"fd9000dc.f5d3d","wires":[["e93f7684.b28d88"]]}]
