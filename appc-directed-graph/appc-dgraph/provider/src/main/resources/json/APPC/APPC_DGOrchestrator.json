/*-
 * ============LICENSE_START=======================================================
 * ONAP : APP-C
 * ================================================================================
 * Copyright (C) 2017 AT&T Intellectual Property.  All rights reserved.
 * ================================================================================
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 *      http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ============LICENSE_END=========================================================
 */

[{"id":"cc7613cc.95794","type":"dgstart","name":"DGSTART","outputs":1,"x":120,"y":35,"z":"b5c78a68.c719b8","wires":[["2d4b90af.faf41"]]},{"id":"2d4b90af.faf41","type":"service-logic","name":"APPC 4.0.0","module":"APPC","version":"4.0.0","comments":"","xml":"<service-logic xmlns='http://www.openecomp.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.openecomp.org/sdnc/svclogic ./svclogic.xsd' module='APPC' version='4.0.0'>","outputs":1,"x":277.34282302856445,"y":34.98572540283203,"z":"b5c78a68.c719b8","wires":[["8304fc44.9ebbb"]]},{"id":"8304fc44.9ebbb","type":"method","name":"method DGOrchestrator","xml":"<method rpc='DGOrchestrator' mode='sync'>\n","comments":"","outputs":1,"x":481.89046478271484,"y":24.48572540283203,"z":"b5c78a68.c719b8","wires":[["acf3ff69.b8c6d"]]},{"id":"acf3ff69.b8c6d","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","comments":"","outputs":1,"x":88.15634155273438,"y":158.18809700012207,"z":"b5c78a68.c719b8","wires":[["45701fe7.e3742","5723a974.ebf848","a5458042.bca07","f8f31869.052208"]]},{"id":"f8f31869.052208","type":"call","name":"call: setInputParams","xml":"<call module=\"APPC\" rpc=\"setInputParams\" mode=\"sync\">","comments":"","outputs":1,"x":622.9142913818359,"y":74.48572635650635,"z":"b5c78a68.c719b8","wires":[["622ca56a.3fad0c","659a6371.afedbc","62b5aa24.e512d4"]]},{"id":"cd3540fd.5c901","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":2115.6643924713135,"y":185.90237140655518,"z":"b5c78a68.c719b8","wires":[["c93880dc.83f6b"]]},{"id":"2cfe388d.c4a318","type":"execute","name":"execute get and executeFlowSequence","xml":"<execute plugin=\"org.openecomp.appc.flow.controller.node.FlowControlNode\" method=\"processFlow\">\n<parameter name=\"messageType\" value=\"response\" />\n<parameter name=\"message\" value=\"`$tmp.message`\" />\n<parameter name=\"responsePrefix\" value=\"tmp.flowControl\" />\n","comments":"","outputs":1,"x":1823.7911643981934,"y":198.21586418151855,"z":"b5c78a68.c719b8","wires":[["cd3540fd.5c901","a73b7dad.5f10d"]]},{"id":"c93880dc.83f6b","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","comments":"","outputs":1,"x":2326.711868286133,"y":183.4261817932129,"z":"b5c78a68.c719b8","wires":[["90e79699.33c448"]]},{"id":"ce8b3cd9.aa5d5","type":"set","name":"set error-code 400 and message","xml":"<set>\n<parameter name='error-code' value='400' />\n<parameter name='error-message' value=\"SUCCESS - request has been processed successfully\" />\n<parameter name='output-payload' value=\"`'state : ' + $output.payload.state` \" />\n","comments":"","x":2572.1879119873047,"y":264.985652923584,"z":"b5c78a68.c719b8","wires":[]},{"id":"a73b7dad.5f10d","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":2121.5452003479004,"y":265.56900215148926,"z":"b5c78a68.c719b8","wires":[["7c4a5d10.2ce964"]]},{"id":"7c4a5d10.2ce964","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","comments":"","outputs":1,"x":2309.425952911377,"y":265.2237958908081,"z":"b5c78a68.c719b8","wires":[["ce8b3cd9.aa5d5"]]},{"id":"90e79699.33c448","type":"set","name":"set error-code 401 and message","xml":"<set>\n<parameter name='error-code' value='401' />\n<parameter name='error-message' value=\"`$tmp.flowControl.status-message`\" />\n<parameter name='output-payload' value=\"\" />\n","comments":"","x":2576.9976806640625,"y":183.36661529541016,"z":"b5c78a68.c719b8","wires":[]},{"id":"5723a974.ebf848","type":"execute","name":"execute saveTxLog","xml":"<execute plugin=\"org.openecomp.appc.data.services.node.ConfigResourceNode\" method=\"saveConfigTransactionLog\">\n<parameter name=\"messageType\" value=\"response\" />\n<parameter name=\"message\" value=\"`$tmp.message`\" />\n<parameter name=\"responsePrefix\" value=\"tmp.saveTxLog\" />\n","comments":"","outputs":1,"x":287.4975776672363,"y":876.0412883758545,"z":"b5c78a68.c719b8","wires":[["5a16feb3.2142b"]]},{"id":"5a16feb3.2142b","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":488.9419479370117,"y":876.957914352417,"z":"b5c78a68.c719b8","wires":[["9973dad4.c4f6c8"]]},{"id":"9973dad4.c4f6c8","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","comments":"","outputs":1,"x":664.4143218994141,"y":878.5412473678589,"z":"b5c78a68.c719b8","wires":[[]]},{"id":"45701fe7.e3742","type":"set","name":"set tmp.message","xml":"<set>\n<parameter name=\"tmp.message\" value=\"`$error-code + ':' + $error-message`\"/>\n","comments":"","x":306.2753677368164,"y":788.2357015609741,"z":"b5c78a68.c719b8","wires":[]},{"id":"622ca56a.3fad0c","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":838.414306640625,"y":33.652387619018555,"z":"b5c78a68.c719b8","wires":[["6a0a4cab.d6ed74"]]},{"id":"659a6371.afedbc","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":832.914306640625,"y":72.65238952636719,"z":"b5c78a68.c719b8","wires":[["6a0a4cab.d6ed74"]]},{"id":"6a0a4cab.d6ed74","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">\n\n","atomic":"true","comments":"","outputs":1,"x":1005.664306640625,"y":54.15241241455078,"z":"b5c78a68.c719b8","wires":[[]]},{"id":"a5458042.bca07","type":"switchNode","name":"switch error-code","xml":"<switch test='`$error-code`'>\n","comments":"","outputs":1,"x":311.0809631347656,"y":729.9024333953857,"z":"b5c78a68.c719b8","wires":[["3369bc31.864784","db62a292.a4939"]]},{"id":"3369bc31.864784","type":"success","name":"outcome: 400","xml":"<outcome value=\"400\">","comments":"","outputs":1,"x":575.7475891113281,"y":682.2357139587402,"z":"b5c78a68.c719b8","wires":[["84d8c9bc.503a98"]]},{"id":"db62a292.a4939","type":"success","name":"outcome: Other","xml":"<outcome value=\"Other\">","comments":"","outputs":1,"x":575.664249420166,"y":782.235746383667,"z":"b5c78a68.c719b8","wires":[["149ad4e8.284b8b"]]},{"id":"84d8c9bc.503a98","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":786.9976348876953,"y":684.9024209976196,"z":"b5c78a68.c719b8","wires":[["373e530e.18cd9c"]]},{"id":"149ad4e8.284b8b","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":768.9974899291992,"y":783.485746383667,"z":"b5c78a68.c719b8","wires":[["2e5fbdd7.64def2"]]},{"id":"373e530e.18cd9c","type":"set","name":"set Status for dispatcher","xml":"<set>\n<parameter name='SvcLogic.status' value='success' />\n<parameter name='output.status.code' value='`$error-code`' />\n<parameter name='output.status.message' value='`$error-message`' />","comments":"","x":1036.6643371582031,"y":683.0690479278564,"z":"b5c78a68.c719b8","wires":[]},{"id":"2e5fbdd7.64def2","type":"set","name":"set Status for dispatcher","xml":"<set>\n<parameter name='SvcLogic.status' value='failure' />\n<parameter name='output.status.code' value='`$error-code`' />\n<parameter name='output.status.message' value='`$error-message`' />\n","comments":"","x":1006.1642837524414,"y":782.4023923873901,"z":"b5c78a68.c719b8","wires":[]},{"id":"5ffe82f1.ced74c","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","comments":"","outputs":1,"x":499.16426849365234,"y":185.81904411315918,"z":"b5c78a68.c719b8","wires":[["f2a3b57e.020398"]]},{"id":"62b5aa24.e512d4","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":828.747615814209,"y":112.48571968078613,"z":"b5c78a68.c719b8","wires":[["5ffe82f1.ced74c"]]},{"id":"b1cea122.15118","type":"execute","name":"execute getCapability","xml":"<execute plugin=\"org.openecomp.appc.data.services.node.ConfigResourceNode\" method=\"getCapability\">\n<parameter name=\"caplevel\" value=\"`$action-level`\" />\n<parameter name=\"checkCapability\" value=\"`$request-action`\" />\n<parameter name=\"vnf-type\" value=\"`$vnf-type`\" />\n\n","comments":"","outputs":1,"x":804.9144706726074,"y":333.9023542404175,"z":"b5c78a68.c719b8","wires":[["d22ba9c1.a51338","eb81f91.6a55e08"]]},{"id":"1fadfea8.b95051","type":"switchNode","name":"switch capability-result","xml":"<switch test=\"`$capabilities`\">\n","comments":"","outputs":1,"x":1134.704574584961,"y":419.6452317237854,"z":"b5c78a68.c719b8","wires":[["e9a40f9e.0d95c","9e5a076a.69f2e8","439b34b1.4501ac"]]},{"id":"e9a40f9e.0d95c","type":"success","name":"outcome: Not-Supported","xml":"<outcome value=\"Not-Supported\">","comments":"","outputs":1,"x":1373.9144439697266,"y":546.2356586456299,"z":"b5c78a68.c719b8","wires":[["a8ce8939.428ce8"]]},{"id":"9e5a076a.69f2e8","type":"success","name":"outcome: Supported","xml":"<outcome value=\"Supported\">","comments":"","outputs":1,"x":1364.8310241699219,"y":478.56904220581055,"z":"b5c78a68.c719b8","wires":[["c0c9441c.47acf8"]]},{"id":"d22ba9c1.a51338","type":"failure","name":"Other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":1106.0094909667969,"y":280.0928611755371,"z":"b5c78a68.c719b8","wires":[["bf213715.b3a6c8"]]},{"id":"eb81f91.6a55e08","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":1090.4619979858398,"y":336.90238761901855,"z":"b5c78a68.c719b8","wires":[["a3035540.336198"]]},{"id":"a8ce8939.428ce8","type":"set","name":"set error-code 450 and message","xml":"<set>\n<parameter name='error-code' value='450' />\n<parameter name='error-message' value=\"Request not supported\" />\n<parameter name='output-payload' value=\"\" />","comments":"","x":1664.247543334961,"y":547.9023866653442,"z":"b5c78a68.c719b8","wires":[]},{"id":"c0c9441c.47acf8","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","comments":"","outputs":1,"x":1586.2476196289062,"y":482.56903076171875,"z":"b5c78a68.c719b8","wires":[["2cfe388d.c4a318"]]},{"id":"439b34b1.4501ac","type":"other","name":"Other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":1311.5810661315918,"y":408.23571491241455,"z":"b5c78a68.c719b8","wires":[["bf213715.b3a6c8"]]},{"id":"7bfc9412.60aa0c","type":"set","name":"set error code 401","xml":"<set>\n<parameter name='error-code' value='401' />\n<parameter name='error-message' value=\"Cannot Determine Capabilities\" />\n<parameter name='output-payload' value=\"\" />\n","comments":"","x":1544.9141693115234,"y":277.48572874069214,"z":"b5c78a68.c719b8","wires":[]},{"id":"a3035540.336198","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">\n\n","atomic":"true","comments":"","outputs":1,"x":935.2992706298828,"y":420.0594539642334,"z":"b5c78a68.c719b8","wires":[["1fadfea8.b95051"]]},{"id":"b32ad07d.3b548","type":"record","name":"record","xml":"<record plugin=\"org.openecomp.sdnc.sli.recording.Slf4jRecorder\">\n<parameter name=\"level\" value=\"info\"/>\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"field2\" value=\"` 'Capabilities results will be - '+$capabilities`\" />","comments":"","outputs":1,"x":1511.3230590820312,"y":337.7023859024048,"z":"b5c78a68.c719b8","wires":[[]]},{"id":"f2a3b57e.020398","type":"switchNode","name":"switch action-level","xml":"<switch test='`$action-level`'>\n","comments":"","outputs":1,"x":690.4444808959961,"y":186.66671562194824,"z":"b5c78a68.c719b8","wires":[["33069169.beb0fe","640470bf.d9539"]]},{"id":"33069169.beb0fe","type":"success","name":"outcome: Other","xml":"<outcome value='Other'>","comments":"","outputs":1,"x":587.8610458374023,"y":331.4166831970215,"z":"b5c78a68.c719b8","wires":[["b1cea122.15118"]]},{"id":"640470bf.d9539","type":"success","name":"outcome: vm","xml":"<outcome value='vm'>","comments":"","outputs":1,"x":886.1943511962891,"y":184.08336639404297,"z":"b5c78a68.c719b8","wires":[["b9c857ee.f64a08"]]},{"id":"bf213715.b3a6c8","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">\n\n","atomic":"true","comments":"","outputs":1,"x":1339.2476119995117,"y":282.15234565734863,"z":"b5c78a68.c719b8","wires":[["7bfc9412.60aa0c","b32ad07d.3b548"]]},{"id":"b9c857ee.f64a08","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">\n\n","atomic":"true","comments":"","outputs":1,"x":1101.6666717529297,"y":184.99999809265137,"z":"b5c78a68.c719b8","wires":[["2cfe388d.c4a318"]]}]
