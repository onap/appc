[
    {
        "id": "eaad909.4847f7",
        "type": "dgstart",
        "name": "DGSTART",
        "outputs": 1,
        "x": 121.515625,
        "y": 44.00001049041748,
        "z": "a3df70df.04e24",
        "wires": [
            [
                "477245bd.489fdc"
            ]
        ]
    },
    {
        "id": "477245bd.489fdc",
        "type": "service-logic",
        "name": "APPC 2.0.0",
        "module": "APPC",
        "version": "2.0.0",
        "comments": "",
        "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='APPC' version='2.0.0'>",
        "outputs": 1,
        "x": 280.51573944091797,
        "y": 43.99999809265137,
        "z": "a3df70df.04e24",
        "wires": [
            [
                "46f888eb.bb8db8"
            ]
        ]
    },
    {
        "id": "46f888eb.bb8db8",
        "type": "method",
        "name": "Rebuild_VNFC",
        "xml": "<method rpc='Rebuild_VNFC' mode='sync'>\n",
        "comments": "",
        "outputs": 1,
        "x": 194.5157356262207,
        "y": 190.99998664855957,
        "z": "a3df70df.04e24",
        "wires": [
            [
                "876cb51c.0c7748"
            ]
        ]
    },
    {
        "id": "876cb51c.0c7748",
        "type": "block",
        "name": "block",
        "xml": "<block atomic='true'>",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 195.87288665771484,
        "y": 963.8571119308472,
        "z": "a3df70df.04e24",
        "wires": [
            [
                "3845d833.9cc418",
                "197554a7.de417b",
                "cf9627f2.a3c948",
                "625d23ed.e5485c"
            ]
        ]
    },
    {
        "id": "3845d833.9cc418",
        "type": "execute",
        "name": "Resolve Healthcheck DG",
        "xml": "<execute plugin='org.onap.appc.dg.common.VNFCDgResolverPlugin' method='resolveVNFCDg'>\n<parameter name=\"vnfType\" value='`$vnf.type`' />\n<parameter name=\"vnfcType\" value='`$vnfcType`' />\n<parameter name=\"action\" value=\"HealthCheck\" />\n<parameter name=\"api-ver\" value='`$input.common-header.api-ver`' />\n<parameter name=\"prefix\" value=\"HealthCheckDG\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 643.5157623291016,
        "y": 413.2500057220459,
        "z": "a3df70df.04e24",
        "wires": [
            [
                "5a60e452.417a2c",
                "ab5b99a4.bff1b8",
                "28c18ec0.2bae92"
            ]
        ]
    },
    {
        "id": "5a60e452.417a2c",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 938.5157623291016,
        "y": 358.5000057220459,
        "z": "a3df70df.04e24",
        "wires": [
            [
                "b1452b21.d0ac28"
            ]
        ]
    },
    {
        "id": "b1452b21.d0ac28",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1125.2380542755127,
        "y": 357.6688289642334,
        "z": "a3df70df.04e24",
        "wires": [
            [
                "5a24165.45c37e8",
                "b89ec226.426eb",
                "e4c5a25b.7b6df",
                "eff7000a.1592d"
            ]
        ]
    },
    {
        "id": "5a24165.45c37e8",
        "type": "set",
        "name": "Set Message",
        "xml": "<set>\n<parameter name='event-message' value=\"`'Healthcheck DG resolution plugin not found for VNFC : ' + $vnfcName`\"/>\n",
        "comments": "",
        "x": 1310.765769958496,
        "y": 345.2500047683716,
        "z": "a3df70df.04e24",
        "wires": []
    },
    {
        "id": "ab5b99a4.bff1b8",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 955.2658233642578,
        "y": 412.2500057220459,
        "z": "a3df70df.04e24",
        "wires": [
            [
                "5f723a69.644e74"
            ]
        ]
    },
    {
        "id": "5f723a69.644e74",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1101.7380561828613,
        "y": 412.13886070251465,
        "z": "a3df70df.04e24",
        "wires": [
            [
                "a494b597.fdd5b8",
                "b89ec226.426eb",
                "e4c5a25b.7b6df",
                "eff7000a.1592d"
            ]
        ]
    },
    {
        "id": "a494b597.fdd5b8",
        "type": "set",
        "name": "Set Message",
        "xml": "<set>\n<parameter name='event-message' value=\"`'Error while resolving Healthcheck DG for VNFC : ' + $vnfcName`\"/>\n",
        "comments": "",
        "x": 1311.9878158569336,
        "y": 386.1389217376709,
        "z": "a3df70df.04e24",
        "wires": []
    },
    {
        "id": "28c18ec0.2bae92",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 844.6544952392578,
        "y": 476.8888626098633,
        "z": "a3df70df.04e24",
        "wires": [
            [
                "bf7f7850.7be178"
            ]
        ]
    },
    {
        "id": "d0e66bd6.9a5cf8",
        "type": "record",
        "name": "Log message",
        "xml": "<record plugin=\"onap.ccsdk.sli.core.sli.recording.Slf4jRecorder\">\n<parameter name=\"level\" value=\"debug\"/>\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"record\" value=\"`'Healthchek DG resolved to : ' + $HealthCheckDG.dg_name`\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 1137.0713081359863,
        "y": 469.3888626098633,
        "z": "a3df70df.04e24",
        "wires": [
            []
        ]
    },
    {
        "id": "b89ec226.426eb",
        "type": "record",
        "name": "Log error",
        "xml": "<record plugin=\"onap.ccsdk.sli.core.sli.recording.Slf4jRecorder\">\n<parameter name=\"level\" value=\"error\"/>\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"record\" value=\"`$event-message`\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 1333.5566654205322,
        "y": 427.4387893676758,
        "z": "a3df70df.04e24",
        "wires": [
            []
        ]
    },
    {
        "id": "eff7000a.1592d",
        "type": "execute",
        "name": "OutputMessageBuilder",
        "xml": "<execute plugin='org.onap.appc.dg.common.OutputMessagePlugin' method='outputMessageBuilder' >\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n<parameter name=\"event-message\" value=\"`$event-message`\" />",
        "comments": "",
        "outputs": 1,
        "x": 1375.432273864746,
        "y": 466.25000762939453,
        "z": "a3df70df.04e24",
        "wires": [
            [
                "f8d36fce.144d4"
            ]
        ]
    },
    {
        "id": "e4c5a25b.7b6df",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-message' value=\"`$error-message`\"/>",
        "comments": "",
        "x": 1344.5435523986816,
        "y": 505.60894203186035,
        "z": "a3df70df.04e24",
        "wires": []
    },
    {
        "id": "f8d36fce.144d4",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1870.4317054748535,
        "y": 473.2499942779541,
        "z": "a3df70df.04e24",
        "wires": [
            [
                "6ed1f54a.cc218c"
            ]
        ]
    },
    {
        "id": "6ed1f54a.cc218c",
        "type": "execute",
        "name": "Report Error to DCAE",
        "xml": "<execute plugin='org.onap.appc.dg.common.DCAEReporterPlugin' method='report' >\n<parameter name=\"event-message\" value=\"`$event-message`\" />",
        "comments": "",
        "outputs": 1,
        "x": 2056.003360748291,
        "y": 472.9642581939697,
        "z": "a3df70df.04e24",
        "wires": [
            []
        ]
    },
    {
        "id": "197554a7.de417b",
        "type": "block",
        "name": "block",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 510.5156059265137,
        "y": 896.2857542037964,
        "z": "a3df70df.04e24",
        "wires": [
            [
                "2da692a3.f3d24e",
                "696563.76d13a9c"
            ]
        ]
    },
    {
        "id": "2da692a3.f3d24e",
        "type": "set",
        "name": "init",
        "xml": "<set>\n<parameter name='rebuildFailedCount' value='0' />\n<parameter name='rebuildSuccessCount' value='0' />\n",
        "comments": "",
        "x": 706.4947624206543,
        "y": 852.5715408325195,
        "z": "a3df70df.04e24",
        "wires": []
    },
    {
        "id": "696563.76d13a9c",
        "type": "for",
        "name": "For Each VM",
        "xml": "<for index=\"index1\" start=\"0\" end=\"`$vmCount`\" >",
        "comments": "",
        "outputs": 1,
        "x": 712.5299797058105,
        "y": 946.3215417861938,
        "z": "a3df70df.04e24",
        "wires": [
            [
                "f936d415.cdf5d8"
            ]
        ]
    },
    {
        "id": "f0d7c3c0.3357",
        "type": "comment",
        "name": "Rebuild server",
        "info": "",
        "comments": "",
        "x": 515.4611778259277,
        "y": 849.5803728103638,
        "z": "a3df70df.04e24",
        "wires": []
    },
    {
        "id": "b95231a7.306f8",
        "type": "block",
        "name": "block",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 1366.337272644043,
        "y": 956.1429328918457,
        "z": "a3df70df.04e24",
        "wires": [
            [
                "eefe17be.bcb8c8",
                "d5774ec5.0c02c",
                "5d776bb0.ca76f4"
            ]
        ]
    },
    {
        "id": "eefe17be.bcb8c8",
        "type": "record",
        "name": "Log message",
        "xml": "<record plugin=\"onap.ccsdk.sli.core.sli.recording.Slf4jRecorder\">\n<parameter name=\"level\" value=\"debug\"/>\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"record\" value=\"`'Attempting to rebuild the server : ' + $vm[$index1].url`\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 1566.1947288513184,
        "y": 916.4285984039307,
        "z": "a3df70df.04e24",
        "wires": [
            []
        ]
    },
    {
        "id": "5d776bb0.ca76f4",
        "type": "set",
        "name": "Set Parameters",
        "xml": "<set>\n<parameter name=\"rebuild-vm-url\" value=\"`$vm[$index1].url`\" />\n<parameter name='rebuildRetryCount' value='3'/>\n",
        "comments": "",
        "x": 1555.855613708496,
        "y": 963.8573093414307,
        "z": "a3df70df.04e24",
        "wires": []
    },
    {
        "id": "d5774ec5.0c02c",
        "type": "call",
        "name": "Rebuild",
        "xml": "<call module='APPC' rpc='Rebuild_VM' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1562.8557395935059,
        "y": 1014.85706615448,
        "z": "a3df70df.04e24",
        "wires": [
            [
                "59a4e75d.d38548",
                "1f0d98cc.b704c7",
                "9f141c25.7249a"
            ]
        ]
    },
    {
        "id": "9f141c25.7249a",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1759.1889038085938,
        "y": 935.85715675354,
        "z": "a3df70df.04e24",
        "wires": [
            [
                "b61d3aa4.e67e18"
            ]
        ]
    },
    {
        "id": "59a4e75d.d38548",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1767.0560913085938,
        "y": 1016.7857456207275,
        "z": "a3df70df.04e24",
        "wires": [
            [
                "d956dbae.d9ba68"
            ]
        ]
    },
    {
        "id": "1f0d98cc.b704c7",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1760.4110565185547,
        "y": 1100.85715675354,
        "z": "a3df70df.04e24",
        "wires": [
            [
                "85d276ba.d6de78"
            ]
        ]
    },
    {
        "id": "b61d3aa4.e67e18",
        "type": "block",
        "name": "block",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 1895.1889038085938,
        "y": 935.8570957183838,
        "z": "a3df70df.04e24",
        "wires": [
            [
                "7fc83896.9017f8",
                "45467de.9c3d884",
                "ec8d8517.b5e138"
            ]
        ]
    },
    {
        "id": "d956dbae.d9ba68",
        "type": "block",
        "name": "block",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 1912.8397827148438,
        "y": 1016.7142734527588,
        "z": "a3df70df.04e24",
        "wires": [
            [
                "45467de.9c3d884",
                "ec8d8517.b5e138",
                "45772e5e.74203"
            ]
        ]
    },
    {
        "id": "85d276ba.d6de78",
        "type": "block",
        "name": "block",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 1913.5536346435547,
        "y": 1101.0000400543213,
        "z": "a3df70df.04e24",
        "wires": [
            [
                "2920713b.8ecbee",
                "2f8f457d.9069ca",
                "a56e38db.669e48"
            ]
        ]
    },
    {
        "id": "7fc83896.9017f8",
        "type": "set",
        "name": "Set message",
        "xml": "<set>\n<parameter name='event-message' value=\"`'DG to execute Rebuild action not found for VM: ' + $vm[$index1].url`\"/>\n<parameter name=\"rebuildFailedCount\" value=\"`$rebuildFailedCount + 1`\" />",
        "comments": "",
        "x": 2142.2600440979004,
        "y": 877.8215465545654,
        "z": "a3df70df.04e24",
        "wires": []
    },
    {
        "id": "45467de.9c3d884",
        "type": "record",
        "name": "Log error",
        "xml": "<record plugin=\"onap.ccsdk.sli.core.sli.recording.Slf4jRecorder\">\n<parameter name=\"level\" value=\"error\"/>\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"record\" value=\"`$event-message`\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 2135.0906105041504,
        "y": 971.2976226806641,
        "z": "a3df70df.04e24",
        "wires": [
            []
        ]
    },
    {
        "id": "ec8d8517.b5e138",
        "type": "execute",
        "name": "OutputMessageBuilder",
        "xml": "<execute plugin='org.onap.appc.dg.common.OutputMessagePlugin' method='outputMessageBuilder' >\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n<parameter name=\"event-message\" value=\"`$event-message`\" />",
        "comments": "",
        "outputs": 1,
        "x": 2151.432403564453,
        "y": 1017.8254547119141,
        "z": "a3df70df.04e24",
        "wires": [
            [
                "5dba5725.37ed08"
            ]
        ]
    },
    {
        "id": "2f8f457d.9069ca",
        "type": "set",
        "name": "Increment Rebuilt vm count",
        "xml": "<set>\n<parameter name='rebuildSuccessCount' value='`$rebuildSuccessCount+1`' />\n",
        "comments": "",
        "x": 2147.693145751953,
        "y": 1115.6347827911377,
        "z": "a3df70df.04e24",
        "wires": []
    },
    {
        "id": "2920713b.8ecbee",
        "type": "record",
        "name": "Log message",
        "xml": "<record plugin=\"onap.ccsdk.sli.core.sli.recording.Slf4jRecorder\">\n<parameter name=\"level\" value=\"debug\"/>\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"record\" value=\"`'Rebuild succeeded for the server : ' + $vm[$index1].url`\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 2106.946563720703,
        "y": 1165.4286012649536,
        "z": "a3df70df.04e24",
        "wires": [
            []
        ]
    },
    {
        "id": "bcefbe85.1105a",
        "type": "call",
        "name": "Call Healthcheck DG",
        "xml": "<call rpc='`$HealthCheckDG.dg_name`' version='`$HealthCheckDG.dg_version`' module='`$HealthCheckDG.dg_module`' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1153.496726989746,
        "y": 1437.9076089859009,
        "z": "a3df70df.04e24",
        "wires": [
            [
                "5d9bf492.adff0c",
                "74b4379f.bebfb8",
                "d033214b.0aeb8"
            ]
        ]
    },
    {
        "id": "5d9bf492.adff0c",
        "type": "outcome",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1360.1917343139648,
        "y": 1437.6747550964355,
        "z": "a3df70df.04e24",
        "wires": [
            [
                "7331efc9.7750b"
            ]
        ]
    },
    {
        "id": "74b4379f.bebfb8",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1368.7084579467773,
        "y": 1396.0126457214355,
        "z": "a3df70df.04e24",
        "wires": [
            [
                "4beb1e4e.47a8f"
            ]
        ]
    },
    {
        "id": "d033214b.0aeb8",
        "type": "outcome",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1367.4419784545898,
        "y": 1486.174633026123,
        "z": "a3df70df.04e24",
        "wires": [
            [
                "f73a2115.bc8a4"
            ]
        ]
    },
    {
        "id": "f73a2115.bc8a4",
        "type": "for",
        "name": "For Each VM",
        "xml": "<for index=\"index1\" start=\"0\" end=\"`$healthcheck.vmCount`\" >",
        "comments": "",
        "outputs": 1,
        "x": 1551.942039489746,
        "y": 1507.996238231659,
        "z": "a3df70df.04e24",
        "wires": [
            [
                "630851d7.42d62"
            ]
        ]
    },
    {
        "id": "4beb1e4e.47a8f",
        "type": "block",
        "name": "block",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 1558.1918487548828,
        "y": 1394.424723625183,
        "z": "a3df70df.04e24",
        "wires": [
            [
                "4bdeb116.8627e",
                "b225d38f.9918c",
                "c27e0644.371e18",
                "6c91e733.9441c8"
            ]
        ]
    },
    {
        "id": "7331efc9.7750b",
        "type": "block",
        "name": "block",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 1562.9418601989746,
        "y": 1441.4246625900269,
        "z": "a3df70df.04e24",
        "wires": [
            [
                "b0a53c62.1f05c",
                "4bdeb116.8627e",
                "c27e0644.371e18",
                "6c91e733.9441c8"
            ]
        ]
    },
    {
        "id": "630851d7.42d62",
        "type": "switchNode",
        "name": "Healthcheck status ?",
        "xml": "<switch test=\"`$healthcheck.vm[$index1].status`\">\n",
        "comments": "",
        "outputs": 1,
        "x": 1815.6564025878906,
        "y": 1507.9959888458252,
        "z": "a3df70df.04e24",
        "wires": [
            [
                "c669c1cf.8ea34",
                "e2f83365.f181d"
            ]
        ]
    },
    {
        "id": "c669c1cf.8ea34",
        "type": "other",
        "name": "UP",
        "xml": "<outcome value='UP'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2068.1925048828125,
        "y": 1539.3176288604736,
        "z": "a3df70df.04e24",
        "wires": [
            [
                "de6f6d2d.6003b"
            ]
        ]
    },
    {
        "id": "b0a53c62.1f05c",
        "type": "set",
        "name": "Set Message",
        "xml": "<set>\n<parameter name='event-message' value=\"Error occurred during health check of the rebuilt servers\"/>",
        "comments": "",
        "x": 1810.9419250488281,
        "y": 1292.4245748519897,
        "z": "a3df70df.04e24",
        "wires": []
    },
    {
        "id": "b225d38f.9918c",
        "type": "set",
        "name": "Set Message",
        "xml": "<set>\n<parameter name='event-message' value=\"VNFC Health check DG not found\"/>",
        "comments": "",
        "x": 1809.6089172363281,
        "y": 1329.424575805664,
        "z": "a3df70df.04e24",
        "wires": []
    },
    {
        "id": "4bdeb116.8627e",
        "type": "record",
        "name": "Log error",
        "xml": "<record plugin=\"onap.ccsdk.sli.core.sli.recording.Slf4jRecorder\">\n<parameter name=\"level\" value=\"error\"/>\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"record\" value=\"`$event-message`\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 1797.0752258300781,
        "y": 1366.237319946289,
        "z": "a3df70df.04e24",
        "wires": [
            []
        ]
    },
    {
        "id": "471fcde.b748a34",
        "type": "set",
        "name": "Set Message",
        "xml": "<set>\n<parameter name='event-message' value=\"`'Health check failed for the rebuilt server : ' + $healthcheck.vm[$index1].url`\"/>\n<parameter name=\"healthCheckFailedCount\" value=\"`$healthCheckFailedCount + 1`\" />",
        "comments": "",
        "x": 2516.8708877563477,
        "y": 1390.710464477539,
        "z": "a3df70df.04e24",
        "wires": []
    },
    {
        "id": "e63d0e68.bd4f3",
        "type": "record",
        "name": "Log error",
        "xml": "<record plugin=\"onap.ccsdk.sli.core.sli.recording.Slf4jRecorder\">\n<parameter name=\"level\" value=\"error\"/>\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"record\" value=\"`$event-message`\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 2511.5666885375977,
        "y": 1435.0606861114502,
        "z": "a3df70df.04e24",
        "wires": [
            []
        ]
    },
    {
        "id": "ca5672e7.4dc8b",
        "type": "set",
        "name": "Set Success Message",
        "xml": "<set>\n<parameter name='success-message' value=\"`'Rebuild succeeded for the server : ' + $healthcheck.vm[$index1].url`\"/>\n<parameter name=\"HealthyVMCountAfterRebuild\" value=\"`$HealthyVMCountAfterRebuild + 1`\" />\n\n",
        "comments": "",
        "x": 2473.2468643188477,
        "y": 1575.2411069869995,
        "z": "a3df70df.04e24",
        "wires": []
    },
    {
        "id": "eeedd6c9.b99c68",
        "type": "record",
        "name": "Log message",
        "xml": "<record plugin=\"onap.ccsdk.sli.core.sli.recording.Slf4jRecorder\">\n<parameter name=\"level\" value=\"debug\"/>\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"record\" value=\"`$success-message`\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 2455.0686416625977,
        "y": 1616.4550971984863,
        "z": "a3df70df.04e24",
        "wires": [
            []
        ]
    },
    {
        "id": "9a27cf10.51a0e",
        "type": "execute",
        "name": "Report Success",
        "xml": "<execute plugin='org.onap.appc.dg.common.DCAEReporterPlugin' method='reportSuccess' >\n<parameter name=\"event-message\" value=\"`$success-message`\" />\n\n",
        "comments": "",
        "outputs": 1,
        "x": 2456.4067764282227,
        "y": 1659.9958686828613,
        "z": "a3df70df.04e24",
        "wires": [
            []
        ]
    },
    {
        "id": "5dba5725.37ed08",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2359.4117164611816,
        "y": 1016.6579265594482,
        "z": "a3df70df.04e24",
        "wires": [
            [
                "c4ac0807.bbe838"
            ]
        ]
    },
    {
        "id": "c4ac0807.bbe838",
        "type": "execute",
        "name": "Report Error to DCAE",
        "xml": "<execute plugin='org.onap.appc.dg.common.DCAEReporterPlugin' method='report' >\n<parameter name=\"event-message\" value=\"`$event-message`\" />",
        "comments": "",
        "outputs": 1,
        "x": 2561.9280166625977,
        "y": 1015.1224517822266,
        "z": "a3df70df.04e24",
        "wires": [
            []
        ]
    },
    {
        "id": "c27e0644.371e18",
        "type": "execute",
        "name": "OutputMessageBuilder",
        "xml": "<execute plugin='org.onap.appc.dg.common.OutputMessagePlugin' method='outputMessageBuilder' >\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n<parameter name=\"event-message\" value=\"`$event-message`\" />",
        "comments": "",
        "outputs": 1,
        "x": 1828.2294692993164,
        "y": 1441.4634456634521,
        "z": "a3df70df.04e24",
        "wires": [
            [
                "54cd71b0.adc9a"
            ]
        ]
    },
    {
        "id": "d6588952.ede9e8",
        "type": "execute",
        "name": "OutputMessageBuilder",
        "xml": "<execute plugin='org.onap.appc.dg.common.OutputMessagePlugin' method='outputMessageBuilder' >\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n<parameter name=\"event-message\" value=\"`$event-message`\" />",
        "comments": "",
        "outputs": 1,
        "x": 2543.3047256469727,
        "y": 1471.5465259552002,
        "z": "a3df70df.04e24",
        "wires": [
            [
                "2f5dff14.0d363"
            ]
        ]
    },
    {
        "id": "6c91e733.9441c8",
        "type": "set",
        "name": "update failed count",
        "xml": "<set>\n<parameter name=\"healthCheckFailedCount\" value=\"`$healthcheck.vmCount`\" />\n",
        "comments": "",
        "x": 1828.4514465332031,
        "y": 1403.7968912124634,
        "z": "a3df70df.04e24",
        "wires": []
    },
    {
        "id": "2f5dff14.0d363",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2734.0279121398926,
        "y": 1471.063443183899,
        "z": "a3df70df.04e24",
        "wires": [
            [
                "1e52cac0.5406d5"
            ]
        ]
    },
    {
        "id": "1e52cac0.5406d5",
        "type": "execute",
        "name": "Report Error to DCAE",
        "xml": "<execute plugin='org.onap.appc.dg.common.DCAEReporterPlugin' method='report' >\n<parameter name=\"event-message\" value=\"`$event-message`\" />",
        "comments": "",
        "outputs": 1,
        "x": 2911.044479370117,
        "y": 1470.7779712677002,
        "z": "a3df70df.04e24",
        "wires": [
            []
        ]
    },
    {
        "id": "b7bc492c.e7d788",
        "type": "returnSuccess",
        "name": "return success",
        "xml": "<return status='success'>\n\n",
        "comments": "",
        "x": 882.7390403747559,
        "y": 1903.259358406067,
        "z": "a3df70df.04e24",
        "wires": []
    },
    {
        "id": "86a6c187.16524",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\n",
        "comments": "",
        "x": 881.7392272949219,
        "y": 1755.2599039077759,
        "z": "a3df70df.04e24",
        "wires": []
    },
    {
        "id": "cf9627f2.a3c948",
        "type": "switchNode",
        "name": "switch_server_rebuild_success",
        "xml": "<switch test='`$rebuildFailedCount == 0 and $healthCheckFailedCount == 0`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 452.5171585083008,
        "y": 1785.1235618591309,
        "z": "a3df70df.04e24",
        "wires": [
            [
                "b55430d2.12c3a",
                "4e364f61.3d66"
            ]
        ]
    },
    {
        "id": "4e364f61.3d66",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 674.2671890258789,
        "y": 1900.8736362457275,
        "z": "a3df70df.04e24",
        "wires": [
            [
                "b7bc492c.e7d788"
            ]
        ]
    },
    {
        "id": "b55430d2.12c3a",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 679.7671890258789,
        "y": 1757.8736972808838,
        "z": "a3df70df.04e24",
        "wires": [
            [
                "86a6c187.16524"
            ]
        ]
    },
    {
        "id": "f936d415.cdf5d8",
        "type": "switchNode",
        "name": "switch STATUS",
        "xml": "<switch test='`$REBUILD_STATUS`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 957.8552398681641,
        "y": 947.5714206695557,
        "z": "a3df70df.04e24",
        "wires": [
            [
                "855b6f1.b3f689",
                "68734288.4e6dcc",
                "9cfc922d.098f4"
            ]
        ]
    },
    {
        "id": "68734288.4e6dcc",
        "type": "other",
        "name": "ERROR/EMPTY",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1167.855224609375,
        "y": 996.142840385437,
        "z": "a3df70df.04e24",
        "wires": [
            [
                "b95231a7.306f8"
            ]
        ]
    },
    {
        "id": "855b6f1.b3f689",
        "type": "success",
        "name": "SUCCESS",
        "xml": "<outcome value='SUCCESS'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1163.284065246582,
        "y": 884.8571338653564,
        "z": "a3df70df.04e24",
        "wires": [
            [
                "b95231a7.306f8"
            ]
        ]
    },
    {
        "id": "9cfc922d.098f4",
        "type": "other",
        "name": "CONTEXT_NOT_FOUND",
        "xml": "<outcome value='CONTEXT_NOT_FOUND'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1139.2837600708008,
        "y": 1100.42848777771,
        "z": "a3df70df.04e24",
        "wires": [
            [
                "e21406fe.870978"
            ]
        ]
    },
    {
        "id": "45772e5e.74203",
        "type": "set",
        "name": "Set error message",
        "xml": "<set>\n<parameter name='error-message' value=\"`$error-message`\"/>\n<parameter name=\"rebuildFailedCount\" value=\"`$rebuildFailedCount + 1`\" />",
        "comments": "",
        "x": 2157.7659034729004,
        "y": 922.3929576873779,
        "z": "a3df70df.04e24",
        "wires": []
    },
    {
        "id": "54cd71b0.adc9a",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2014.944465637207,
        "y": 1333.5473442077637,
        "z": "a3df70df.04e24",
        "wires": [
            [
                "96eac2ee.4a631"
            ]
        ]
    },
    {
        "id": "96eac2ee.4a631",
        "type": "execute",
        "name": "Report Error to DCAE",
        "xml": "<execute plugin='org.onap.appc.dg.common.DCAEReporterPlugin' method='report' >\n<parameter name=\"event-message\" value=\"`$event-message`\" />",
        "comments": "",
        "outputs": 1,
        "x": 2217.4609756469727,
        "y": 1336.2978658676147,
        "z": "a3df70df.04e24",
        "wires": [
            []
        ]
    },
    {
        "id": "de6f6d2d.6003b",
        "type": "block",
        "name": "block",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 2227.4439392089844,
        "y": 1609.261607170105,
        "z": "a3df70df.04e24",
        "wires": [
            [
                "ca5672e7.4dc8b",
                "eeedd6c9.b99c68",
                "9a27cf10.51a0e"
            ]
        ]
    },
    {
        "id": "9789eed7.59185",
        "type": "block",
        "name": "block",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 2284.944023132324,
        "y": 1460.6903219223022,
        "z": "a3df70df.04e24",
        "wires": [
            [
                "471fcde.b748a34",
                "e63d0e68.bd4f3",
                "d6588952.ede9e8"
            ]
        ]
    },
    {
        "id": "625d23ed.e5485c",
        "type": "block",
        "name": "block",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 613.116283416748,
        "y": 1135.7590446472168,
        "z": "a3df70df.04e24",
        "wires": [
            [
                "34b74e1f.8b03a2",
                "e13b093e.4b89d8"
            ]
        ]
    },
    {
        "id": "a56e38db.669e48",
        "type": "set",
        "name": "Mark vm Started",
        "xml": "<set>\n<parameter name=\"rebuildServerList[$rebuildSuccessCount].url\" value=\"`$vm[$index1].url`\" />\n",
        "comments": "",
        "x": 2108.265655517578,
        "y": 1067.43763256073,
        "z": "a3df70df.04e24",
        "wires": []
    },
    {
        "id": "e13b093e.4b89d8",
        "type": "set",
        "name": "init",
        "xml": "<set>\n<parameter name='healthCheckFailedCount' value='0' />\n",
        "comments": "",
        "x": 800.6228790283203,
        "y": 1133.0715503692627,
        "z": "a3df70df.04e24",
        "wires": []
    },
    {
        "id": "34b74e1f.8b03a2",
        "type": "switchNode",
        "name": "rebuilt server > 0",
        "xml": "<switch test='`$rebuildSuccessCount > 0`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 781.2680816650391,
        "y": 1184.5001392364502,
        "z": "a3df70df.04e24",
        "wires": [
            [
                "fd385bf3.f3af58"
            ]
        ]
    },
    {
        "id": "fd385bf3.f3af58",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 928.3038482666016,
        "y": 1263.5359992980957,
        "z": "a3df70df.04e24",
        "wires": [
            [
                "b30e5a44.ec1d68"
            ]
        ]
    },
    {
        "id": "b30e5a44.ec1d68",
        "type": "block",
        "name": "block",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 1058.7657775878906,
        "y": 1263.7858772277832,
        "z": "a3df70df.04e24",
        "wires": [
            [
                "cf4f0246.98a17",
                "1de1c606.06eb0a",
                "1592ea7b.84e196",
                "bcefbe85.1105a"
            ]
        ]
    },
    {
        "id": "cf4f0246.98a17",
        "type": "record",
        "name": "Log message",
        "xml": "<record plugin=\"onap.ccsdk.sli.core.sli.recording.Slf4jRecorder\">\n<parameter name=\"level\" value=\"debug\"/>\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"record\" value=\"Attempting to health check the rebuilt servers of the VNFC\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 1270.6228256225586,
        "y": 1231.6430795192719,
        "z": "a3df70df.04e24",
        "wires": [
            []
        ]
    },
    {
        "id": "1de1c606.06eb0a",
        "type": "for",
        "name": "for_each_vm",
        "xml": "<for index=\"index1\" start=\"0\" end=\"`$rebuildSuccessCount`\" >",
        "comments": "",
        "outputs": 1,
        "x": 1274.7134017944336,
        "y": 1276.2621040344238,
        "z": "a3df70df.04e24",
        "wires": [
            [
                "f20611f4.79fd9"
            ]
        ]
    },
    {
        "id": "1592ea7b.84e196",
        "type": "set",
        "name": "set",
        "xml": "<set>\n<parameter name=\"healthcheck.vmCount\" value=\"`$rebuildSuccessCount`\" />\n<parameter name=\"retry-healthcheck\" value=\"true\"/>\n",
        "comments": "",
        "x": 1260.7131576538086,
        "y": 1319.2620992660522,
        "z": "a3df70df.04e24",
        "wires": []
    },
    {
        "id": "f20611f4.79fd9",
        "type": "set",
        "name": "set : health check input list",
        "xml": "<set>\n<parameter name=\"healthcheck.vm[$index1].url\" value=\"`$rebuildServerList[$index1].url`\" />\n",
        "comments": "",
        "x": 1493.1576232910156,
        "y": 1277.3729391098022,
        "z": "a3df70df.04e24",
        "wires": []
    },
    {
        "id": "7c6710be.b224d",
        "type": "comment",
        "name": "Healthcheck Rebuilt servers",
        "info": "",
        "comments": "",
        "x": 590.6228942871094,
        "y": 1220.2144412994385,
        "z": "a3df70df.04e24",
        "wires": []
    },
    {
        "id": "e2f83365.f181d",
        "type": "other",
        "name": "UNKNOWN/DOWN",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2084.1944274902344,
        "y": 1461.643030166626,
        "z": "a3df70df.04e24",
        "wires": [
            [
                "9789eed7.59185"
            ]
        ]
    },
    {
        "id": "17c0b900.0992d7",
        "type": "set",
        "name": "Set flag",
        "xml": "<set>\n<parameter name='HealthcheckDGResolutionFlag' value=\"true\"/>\n",
        "comments": "",
        "x": 1138.0781440734863,
        "y": 512.4375076293945,
        "z": "a3df70df.04e24",
        "wires": []
    },
    {
        "id": "bf7f7850.7be178",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 983.0781440734863,
        "y": 477.43750762939453,
        "z": "a3df70df.04e24",
        "wires": [
            [
                "d0e66bd6.9a5cf8",
                "17c0b900.0992d7"
            ]
        ]
    },
    {
        "id": "e21406fe.870978",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\n",
        "comments": "",
        "x": 1385.5156707763672,
        "y": 1102.5157146453857,
        "z": "a3df70df.04e24",
        "wires": []
    }
]